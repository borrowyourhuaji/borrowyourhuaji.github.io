<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>ubuntu common cmommand | meow~</title>
  <meta name="description" content="🔹 1. 基础操作命令    功能 命令 说明     查看当前目录 pwd print working directory   列出文件 ls、ls -l、ls -a 加 -l 显示详细，加 -a 显示隐藏文件   切换目录 cd 目录名 cd .. 返回上一级，cd ~ 回家目录   创建目录 mkdir test 递归创建：mkdir -p a&#x2F;b&#x2F;c   创建文件 touch file.">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu common cmommand">
<meta property="og:url" content="https://borrowyourhuaji.github.io/2025/09/13/ubuntu-common-cmommand/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="🔹 1. 基础操作命令    功能 命令 说明     查看当前目录 pwd print working directory   列出文件 ls、ls -l、ls -a 加 -l 显示详细，加 -a 显示隐藏文件   切换目录 cd 目录名 cd .. 返回上一级，cd ~ 回家目录   创建目录 mkdir test 递归创建：mkdir -p a&#x2F;b&#x2F;c   创建文件 touch file.">
<meta property="og:locale">
<meta property="article:published_time" content="2025-09-13T15:37:46.000Z">
<meta property="article:modified_time" content="2025-09-14T06:07:40.268Z">
<meta property="article:author" content="borrowyourhuaji">
<meta property="article:tag" content="service">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://borrowyourhuaji.github.io/2025/09/13/ubuntu-common-cmommand/index.html">
  
  
    <link rel="icon" href="/favicon.gif" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img class="img-circle img-rotate" src="/images/4%20(1).gif" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">borrowyourhuaji</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">😋</h3>
        <small id="sign" class="text-muted hidden-xs hidden-sm"> 时而滑稽之，不亦说乎？</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
      </ul>
      
    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <img src="/favicon.gif" alt="?">
            </div>
        </div>
    </div>
</div>

    
      

    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/" rel="tag">service</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E6%A1%A3%E3%80%81%E5%BA%93/" rel="tag">文档、库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/service/" style="font-size: 13.5px;">service</a> <a href="/tags/%E6%96%87%E6%A1%A3%E3%80%81%E5%BA%93/" style="font-size: 13px;">文档、库</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 14px;">算法</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">September 2025</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/09/14/ubuntu-tool-command/" class="title">tool command</a>
              </p>
              <p class="item-date">
                <time datetime="2025-09-14T05:56:52.000Z" itemprop="datePublished">2025-09-14</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/09/13/ubuntu-services-cmommand/" class="title">ubuntu services cmommand</a>
              </p>
              <p class="item-date">
                <time datetime="2025-09-13T15:42:12.000Z" itemprop="datePublished">2025-09-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/09/13/ubuntu-common-cmommand/" class="title">ubuntu common cmommand</a>
              </p>
              <p class="item-date">
                <time datetime="2025-09-13T15:37:46.000Z" itemprop="datePublished">2025-09-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/09/13/%E6%95%B0%E4%BD%8Ddp/" class="title">数位dp</a>
              </p>
              <p class="item-date">
                <time datetime="2025-09-13T15:00:51.000Z" itemprop="datePublished">2025-09-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/09/13/yolo/" class="title">yolo</a>
              </p>
              <p class="item-date">
                <time datetime="2025-09-13T13:57:08.000Z" itemprop="datePublished">2025-09-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-ubuntu-common-cmommand" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      ubuntu common cmommand
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2025/09/13/ubuntu-common-cmommand/" class="article-date">
	  <time datetime="2025-09-13T15:37:46.000Z" itemprop="datePublished">2025-09-13</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/service/" rel="tag">service</a>
  </span>


        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="%F0%9F%94%B9-1.-%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4" tabindex="-1">🔹 1. 基础操作命令</h1>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>查看当前目录</td>
<td><code>pwd</code></td>
<td>print working directory</td>
</tr>
<tr>
<td>列出文件</td>
<td><code>ls</code>、<code>ls -l</code>、<code>ls -a</code></td>
<td>加 <code>-l</code> 显示详细，加 <code>-a</code> 显示隐藏文件</td>
</tr>
<tr>
<td>切换目录</td>
<td><code>cd 目录名</code></td>
<td><code>cd ..</code> 返回上一级，<code>cd ~</code> 回家目录</td>
</tr>
<tr>
<td>创建目录</td>
<td><code>mkdir test</code></td>
<td>递归创建：<code>mkdir -p a/b/c</code></td>
</tr>
<tr>
<td>创建文件</td>
<td><code>touch file.txt</code></td>
<td>更新文件时间，若不存在就新建</td>
</tr>
<tr>
<td>删除文件</td>
<td><code>rm file.txt</code></td>
<td>删除目录：<code>rm -r dirname</code></td>
</tr>
<tr>
<td>拷贝</td>
<td><code>cp a b</code></td>
<td>拷贝文件；<code>cp -r dir1 dir2</code> 复制目录</td>
</tr>
<tr>
<td>移动/重命名</td>
<td><code>mv a b</code></td>
<td>文件移动/改名</td>
</tr>
<tr>
<td>查看文件内容</td>
<td><code>cat file</code>、<code>less file</code>、<code>head file</code>、<code>tail file</code></td>
<td><code>tail -f log.txt</code> 实时看日志</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="%F0%9F%94%B9-2.-%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90" tabindex="-1">🔹 2. 用户和权限</h1>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>当前用户</td>
<td><code>whoami</code></td>
<td></td>
</tr>
<tr>
<td>切换用户</td>
<td><code>su 用户名</code></td>
<td></td>
</tr>
<tr>
<td>临时管理员</td>
<td><code>sudo 命令</code></td>
<td></td>
</tr>
<tr>
<td>修改权限</td>
<td><code>chmod 755 file</code></td>
<td>读/写/执行权限</td>
</tr>
<tr>
<td>修改属主</td>
<td><code>chown user:group file</code></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h1 id="%F0%9F%94%B9-3.-%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86-(ubuntu-apt)" tabindex="-1">🔹 3. 软件管理 (Ubuntu apt)</h1>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>更新源</td>
<td><code>sudo apt update</code></td>
<td>更新索引，不升级</td>
</tr>
<tr>
<td>升级系统</td>
<td><code>sudo apt upgrade</code></td>
<td>升级已安装包</td>
</tr>
<tr>
<td>安装软件</td>
<td><code>sudo apt install 包名</code></td>
<td></td>
</tr>
<tr>
<td>卸载软件</td>
<td><code>sudo apt remove 包名</code></td>
<td></td>
</tr>
<tr>
<td>搜索软件</td>
<td><code>apt search 关键词</code></td>
<td></td>
</tr>
<tr>
<td>查看已安装</td>
<td>`dpkg -l</td>
<td>grep 包名`</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="%F0%9F%94%B9-4.-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%B3%BB%E7%BB%9F" tabindex="-1">🔹 4. 进程和系统</h1>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>查看进程</td>
<td><code>ps aux</code>、<code>top</code>、<code>htop</code></td>
<td></td>
</tr>
<tr>
<td>杀进程</td>
<td><code>kill -9 pid</code></td>
<td></td>
</tr>
<tr>
<td>系统状态</td>
<td><code>uptime</code>（负载）、<code>free -h</code>（内存）、<code>df -h</code>（磁盘）、<code>du -sh</code>（目录大小）</td>
<td></td>
</tr>
<tr>
<td>网络</td>
<td><code>ping baidu.com</code>、<code>curl ifconfig.me</code>（查看公网 IP）、<code>ss -tulpn</code>（监听端口）</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h1 id="%F0%9F%94%B9-5.-wsl-%E4%B8%93%E5%B1%9E%E5%91%BD%E4%BB%A4%EF%BC%88%E5%9C%A8-windows-powershell-%2F-cmd-%E7%94%A8%EF%BC%89" tabindex="-1">🔹 5. WSL 专属命令（在 Windows PowerShell / CMD 用）</h1>
<p>这些是 <strong>WSL 特有的</strong>，在 Windows 的命令行运行，而不是 Ubuntu 内：</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>进入 WSL</td>
<td><code>wsl</code></td>
<td>默认发行版</td>
</tr>
<tr>
<td>指定发行版</td>
<td><code>wsl -d Ubuntu-22.04</code></td>
<td></td>
</tr>
<tr>
<td>查看已安装发行版</td>
<td><code>wsl -l -v</code></td>
<td></td>
</tr>
<tr>
<td>运行 Linux 命令</td>
<td><code>wsl ls -la</code></td>
<td>在 Windows 下直接执行</td>
</tr>
<tr>
<td>导入导出</td>
<td><code>wsl --export</code> / <code>wsl --import</code></td>
<td></td>
</tr>
<tr>
<td>关闭</td>
<td><code>wsl --shutdown</code></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h1 id="ubuntu-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%88%97%E8%A1%A8" tabindex="-1">Ubuntu 常用命令列表</h1>
<h2 id="1.-%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86%EF%BC%88file-%26-directory-management%EF%BC%89" tabindex="-1">1. 文件和目录管理（File &amp; Directory Management）</h2>
<h4 id="1.-%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E5%86%85%E5%AE%B9" tabindex="-1">1. 查看目录内容</h4>
<ul>
<li>
<p><strong>ls</strong><br>
<strong>功能</strong>: 列出当前或指定目录中的文件和文件夹。<br>
<strong>语法</strong>: <code>ls [选项] [路径]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-l</code>: 长格式显示，包含权限、所有者、大小、修改时间等。</li>
<li><code>-a</code>: 显示隐藏文件（以 <code>.</code> 开头的文件）。</li>
<li><code>-h</code>: 以人类可读格式显示文件大小（如 KB、MB）。</li>
<li><code>-R</code>: 递归列出子目录内容。</li>
<li><code>-t</code>: 按修改时间排序（最新优先）。<br>
<strong>场景</strong>: 检查目录内容、确认文件存在、查看文件属性。<br>
<strong>示例</strong>:</li>
<li><code>ls -la /home/user</code>: 显示 <code>/home/user</code> 目录下所有文件（包括隐藏文件）的详细信息。</li>
<li><code>ls -lh /var/log</code>: 显示日志目录中文件的可读大小。</li>
<li><code>ls -R /etc</code>: 递归列出 <code>/etc</code> 及其子目录内容。</li>
</ul>
</li>
<li>
<p><strong>dir</strong><br>
<strong>功能</strong>: 类似 <code>ls</code>，但以更详细的格式显示目录内容（类似 DOS 的 <code>dir</code>）。<br>
<strong>语法</strong>: <code>dir [选项] [路径]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-a</code>: 显示所有文件（包括隐藏）。</li>
<li><code>-l</code>: 纵向列表显示。</li>
<li><code>--color</code>: 以颜色区分文件类型。<br>
<strong>场景</strong>: 需要与传统 DOS 风格类似的输出，或在脚本中需要更结构化的列表。<br>
<strong>示例</strong>:</li>
<li><code>dir -a /tmp</code>: 显示 <code>/tmp</code> 目录下所有文件。</li>
<li><code>dir --color /home</code>: 以彩色输出列出家目录内容。</li>
</ul>
</li>
<li>
<p><strong>tree</strong><br>
<strong>功能</strong>: 以树状结构显示目录内容（需安装 <code>sudo apt install tree</code>）。<br>
<strong>语法</strong>: <code>tree [选项] [路径]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-a</code>: 显示隐藏文件。</li>
<li><code>-d</code>: 仅显示目录。</li>
<li><code>-L 级别</code>: 限制递归深度。</li>
<li><code>-f</code>: 显示完整路径。<br>
<strong>场景</strong>: 可视化目录结构，适合文档整理或教学。<br>
<strong>示例</strong>:</li>
<li><code>tree -a /home/user</code>: 显示家目录及其子目录的完整树状结构。</li>
<li><code>tree -d -L 2 /etc</code>: 显示 <code>/etc</code> 目录下两级目录结构。</li>
</ul>
</li>
</ul>
<h4 id="2.-%E5%88%87%E6%8D%A2%E5%92%8C%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95" tabindex="-1">2. 切换和查看目录</h4>
<ul>
<li>
<p><strong>cd</strong><br>
<strong>功能</strong>: 更改当前工作目录。<br>
<strong>语法</strong>: <code>cd [路径]</code><br>
<strong>常用选项/用法</strong>:</p>
<ul>
<li><code>cd ..</code>: 返回上一级目录。</li>
<li><code>cd -</code>: 返回上一个工作目录。</li>
<li><code>cd ~</code>: 切换到用户家目录。</li>
<li><code>cd /</code>: 切换到根目录。<br>
<strong>场景</strong>: 在终端导航文件系统，进入特定目录进行操作。<br>
<strong>示例</strong>:</li>
<li><code>cd /var/log</code>: 进入日志目录。</li>
<li><code>cd ~/Documents</code>: 进入用户家目录下的 Documents 文件夹。</li>
<li><code>cd .. &amp;&amp; cd /tmp</code>: 返回上一级目录后进入 <code>/tmp</code>。</li>
</ul>
</li>
<li>
<p><strong>pwd</strong><br>
<strong>功能</strong>: 显示当前工作目录的绝对路径。<br>
<strong>语法</strong>: <code>pwd [选项]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-P</code>: 显示物理路径（解析符号链接）。</li>
<li><code>-L</code>: 显示逻辑路径（包含符号链接）。<br>
<strong>场景</strong>: 确认当前所在目录，尤其在复杂脚本或符号链接环境中。<br>
<strong>示例</strong>:</li>
<li><code>pwd</code>: 显示当前路径，如 <code>/home/user/project</code>。</li>
<li><code>pwd -P</code>: 显示解析符号链接后的实际路径。</li>
</ul>
</li>
</ul>
<h4 id="3.-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95" tabindex="-1">3. 创建文件和目录</h4>
<ul>
<li>
<p><strong>touch</strong><br>
<strong>功能</strong>: 创建空文件或更新文件的时间戳。<br>
<strong>语法</strong>: <code>touch [选项] 文件名</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-t 时间</code>: 设置特定时间戳（如 <code>YYYYMMDDhhmm</code>）。</li>
<li><code>-m</code>: 仅更新修改时间。</li>
<li><code>-a</code>: 仅更新访问时间。</li>
<li><code>-c</code>: 若文件不存在，不创建。<br>
<strong>场景</strong>: 创建占位文件、更新时间戳以标记文件状态。<br>
<strong>示例</strong>:</li>
<li><code>touch file.txt</code>: 创建空文件 <code>file.txt</code>。</li>
<li><code>touch -t 202509141200 file.txt</code>: 将文件时间戳设为 2025 年 9 月 14 日 12:00。</li>
<li><code>touch -c existing_file.txt</code>: 更新现有文件时间戳，不创建新文件。</li>
</ul>
</li>
<li>
<p><strong>mkdir</strong><br>
<strong>功能</strong>: 创建新目录。<br>
<strong>语法</strong>: <code>mkdir [选项] 目录名</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-p</code>: 创建父目录（若不存在）。</li>
<li><code>-m 权限</code>: 设置目录权限（如 <code>755</code>）。</li>
<li><code>-v</code>: 显示创建过程。<br>
<strong>场景</strong>: 组织文件系统、创建项目目录。<br>
<strong>示例</strong>:</li>
<li><code>mkdir newfolder</code>: 创建名为 <code>newfolder</code> 的目录。</li>
<li><code>mkdir -p /path/to/nested/dir</code>: 创建嵌套目录结构。</li>
<li><code>mkdir -m 700 private_dir</code>: 创建权限为 700 的目录。</li>
</ul>
</li>
</ul>
<h4 id="4.-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95" tabindex="-1">4. 删除文件和目录</h4>
<ul>
<li>
<p><strong>rm</strong><br>
<strong>功能</strong>: 删除文件或目录。<br>
<strong>语法</strong>: <code>rm [选项] 文件/目录</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-r</code> 或 <code>-R</code>: 递归删除目录及其内容。</li>
<li><code>-f</code>: 强制删除，不提示确认。</li>
<li><code>-i</code>: 交互式删除，逐个确认。</li>
<li><code>-v</code>: 显示删除过程。<br>
<strong>场景</strong>: 清理无用文件、释放磁盘空间。<br>
<strong>注意</strong>: 使用 <code>-rf</code> 需谨慎，可能导致不可恢复的数据丢失。<br>
<strong>示例</strong>:</li>
<li><code>rm file.txt</code>: 删除单个文件。</li>
<li><code>rm -r folder</code>: 递归删除 <code>folder</code> 及其内容。</li>
<li><code>rm -rf /tmp/*</code>: 强制删除 <code>/tmp</code> 下的所有内容（需谨慎）。</li>
</ul>
</li>
<li>
<p><strong>rmdir</strong><br>
<strong>功能</strong>: 删除空目录。<br>
<strong>语法</strong>: <code>rmdir [选项] 目录名</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-p</code>: 删除空目录及其空父目录。</li>
<li><code>-v</code>: 显示删除过程。<br>
<strong>场景</strong>: 删除不再需要的空目录。<br>
<strong>示例</strong>:</li>
<li><code>rmdir emptyfolder</code>: 删除空目录 <code>emptyfolder</code>。</li>
<li><code>rmdir -p parent/child</code>: 删除 <code>child</code> 及其空父目录 <code>parent</code>。</li>
</ul>
</li>
</ul>
<h4 id="5.-%E5%A4%8D%E5%88%B6%E5%92%8C%E7%A7%BB%E5%8A%A8" tabindex="-1">5. 复制和移动</h4>
<ul>
<li>
<p><strong>cp</strong><br>
<strong>功能</strong>: 复制文件或目录到指定位置。<br>
<strong>语法</strong>: <code>cp [选项] 源 目标</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-r</code> 或 <code>-R</code>: 递归复制目录及其内容。</li>
<li><code>-p</code>: 保留文件属性（如权限、时间戳）。</li>
<li><code>-i</code>: 交互式复制，覆盖前提示。</li>
<li><code>-u</code>: 仅复制比目标新或不存在的文件。</li>
<li><code>-v</code>: 显示复制过程。<br>
<strong>场景</strong>: 备份文件、复制项目目录。<br>
<strong>示例</strong>:</li>
<li><code>cp file.txt /backup/</code>: 复制 <code>file.txt</code> 到 <code>/backup/</code>。</li>
<li><code>cp -r project /backup/</code>: 递归复制 <code>project</code> 目录。</li>
<li><code>cp -up *.txt /backup/</code>: 仅复制更新或新的 <code>.txt</code> 文件。</li>
</ul>
</li>
<li>
<p><strong>mv</strong><br>
<strong>功能</strong>: 移动或重命名文件/目录。<br>
<strong>语法</strong>: <code>mv [选项] 源 目标</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-i</code>: 交互式移动，覆盖前提示。</li>
<li><code>-f</code>: 强制覆盖目标文件。</li>
<li><code>-u</code>: 仅移动比目标新或不存在的文件。</li>
<li><code>-v</code>: 显示移动过程。<br>
<strong>场景</strong>: 重命名文件、移动文件到新位置。<br>
<strong>示例</strong>:</li>
<li><code>mv oldname.txt newname.txt</code>: 重命名文件。</li>
<li><code>mv project /archive/</code>: 移动 <code>project</code> 目录到 <code>/archive/</code>。</li>
<li><code>mv -i file.txt /existing/</code>: 若目标存在，提示是否覆盖。</li>
</ul>
</li>
</ul>
<h4 id="6.-%E9%93%BE%E6%8E%A5%E7%AE%A1%E7%90%86" tabindex="-1">6. 链接管理</h4>
<ul>
<li><strong>ln</strong><br>
<strong>功能</strong>: 创建硬链接或符号链接。<br>
<strong>语法</strong>: <code>ln [选项] 源 链接名</code><br>
<strong>常用选项</strong>:
<ul>
<li><code>-s</code>: 创建符号链接（软链接）。</li>
<li><code>-f</code>: 强制创建，覆盖现有链接。</li>
<li><code>-n</code>: 不将目标视为目录。<br>
<strong>场景</strong>: 创建文件/目录的快捷方式，节省空间或便于访问。<br>
<strong>示例</strong>:</li>
<li><code>ln -s /var/log/app.log app_link</code>: 创建指向 <code>app.log</code> 的符号链接。</li>
<li><code>ln file.txt hardlink.txt</code>: 创建 <code>file.txt</code> 的硬链接。<br>
<strong>注意</strong>: 硬链接共享 inode，符号链接是独立文件，指向源路径。</li>
</ul>
</li>
</ul>
<h4 id="7.-%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95" tabindex="-1">7. 查找文件和目录</h4>
<ul>
<li>
<p><strong>find</strong><br>
<strong>功能</strong>: 在目录中搜索文件或目录，基于名称、类型、时间等条件。<br>
<strong>语法</strong>: <code>find [路径] [选项]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-name 模式</code>: 按文件名搜索（支持通配符）。</li>
<li><code>-type 类型</code>: 指定类型（如 <code>f</code> 表示文件，<code>d</code> 表示目录）。</li>
<li><code>-mtime 天数</code>: 按修改时间搜索（如 <code>-mtime -7</code> 表示 7 天内修改）。</li>
<li><code>-exec 命令</code>: 对找到的文件执行命令。</li>
<li><code>-size 大小</code>: 按文件大小搜索（如 <code>+100M</code> 表示大于 100MB）。<br>
<strong>场景</strong>: 查找丢失文件、清理大文件、批量操作。<br>
<strong>示例</strong>:</li>
<li><code>find /home -name &quot;*.txt&quot;</code>: 查找家目录下所有 <code>.txt</code> 文件。</li>
<li><code>find / -type d -name &quot;temp&quot;</code>: 查找所有名为 <code>temp</code> 的目录。</li>
<li><code>find /var -size +1G -exec rm -v &#123;&#125; \;</code>: 删除 <code>/var</code> 下大于 1GB 的文件。</li>
</ul>
</li>
<li>
<p><strong>locate</strong><br>
<strong>功能</strong>: 快速查找文件（基于预构建的数据库）。<br>
<strong>语法</strong>: <code>locate [选项] 模式</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-i</code>: 忽略大小写。</li>
<li><code>-r</code>: 使用正则表达式。</li>
<li><code>-c</code>: 显示匹配计数。<br>
<strong>场景</strong>: 快速定位文件，适合频繁查找。<br>
<strong>注意</strong>: 需定期运行 <code>sudo updatedb</code> 更新数据库。<br>
<strong>示例</strong>:</li>
<li><code>locate config.yaml</code>: 查找所有名为 <code>config.yaml</code> 的文件。</li>
<li><code>locate -i readme</code>: 查找忽略大小写的 <code>readme</code> 文件。</li>
</ul>
</li>
</ul>
<h4 id="8.-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF" tabindex="-1">8. 文件系统信息</h4>
<ul>
<li>
<p><strong>du</strong><br>
<strong>功能</strong>: 计算目录或文件的磁盘使用量。<br>
<strong>语法</strong>: <code>du [选项] [路径]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-h</code>: 人类可读格式（如 KB、MB）。</li>
<li><code>-s</code>: 汇总目录总大小。</li>
<li><code>-c</code>: 显示总计。</li>
<li><code>--max-depth=N</code>: 限制目录深度。<br>
<strong>场景</strong>: 检查磁盘占用、识别大文件/目录。<br>
<strong>示例</strong>:</li>
<li><code>du -sh /home/user</code>: 显示家目录总大小。</li>
<li><code>du -h --max-depth=1 /var</code>: 显示 <code>/var</code> 下子目录的占用情况。</li>
<li><code>du -hc *.log</code>: 显示当前目录下 <code>.log</code> 文件的总大小。</li>
</ul>
</li>
<li>
<p><strong>df</strong><br>
<strong>功能</strong>: 显示文件系统的磁盘使用情况。<br>
<strong>语法</strong>: <code>df [选项] [文件系统]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-h</code>: 人类可读格式。</li>
<li><code>-T</code>: 显示文件系统类型。</li>
<li><code>-i</code>: 显示 inode 使用情况。<br>
<strong>场景</strong>: 检查磁盘剩余空间、监控存储设备。<br>
<strong>示例</strong>:</li>
<li><code>df -h</code>: 显示所有文件系统的磁盘使用情况。</li>
<li><code>df -T /home</code>: 显示 <code>/home</code> 的文件系统类型和使用量。</li>
</ul>
</li>
</ul>
<h4 id="9.-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E5%B1%9E%E6%80%A7" tabindex="-1">9. 文件权限与属性</h4>
<ul>
<li>
<p><strong>chmod</strong><br>
<strong>功能</strong>: 修改文件或目录的权限。<br>
<strong>语法</strong>: <code>chmod [选项] 权限 文件/目录</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-R</code>: 递归修改目录及其内容。</li>
<li><code>-v</code>: 显示修改过程。<br>
<strong>权限表示</strong>:</li>
<li>数字表示（如 <code>755</code>: 所有者读/写/执行，组和其他读/执行）。</li>
<li>符号表示（如 <code>u+x</code>: 给所有者添加执行权限）。<br>
<strong>场景</strong>: 设置文件访问权限，保护敏感数据。<br>
<strong>示例</strong>:</li>
<li><code>chmod 644 file.txt</code>: 设置文件为所有者读写、其他读。</li>
<li><code>chmod -R 755 /web</code>: 递归设置 <code>/web</code> 目录权限。</li>
<li><code>chmod u+x script.sh</code>: 给 <code>script.sh</code> 的所有者添加执行权限。</li>
</ul>
</li>
<li>
<p><strong>chown</strong><br>
<strong>功能</strong>: 更改文件或目录的所有者和组。<br>
<strong>语法</strong>: <code>chown [选项] 用户[:组] 文件/目录</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-R</code>: 递归更改目录及其内容。</li>
<li><code>-v</code>: 显示更改过程。</li>
<li><code>--reference=文件</code>: 使用参考文件的用户/组。<br>
<strong>场景</strong>: 转移文件所有权、修复权限问题。<br>
<strong>示例</strong>:</li>
<li><code>sudo chown user1 file.txt</code>: 将 <code>file.txt</code> 的所有者改为 <code>user1</code>。</li>
<li><code>sudo chown -R user1:group1 /data</code>: 递归更改 <code>/data</code> 的所有者和组。</li>
<li><code>sudo chown --reference=file1 file2</code>: 将 <code>file2</code> 的所有者/组设为与 <code>file1</code> 相同。</li>
</ul>
</li>
<li>
<p><strong>chgrp</strong><br>
<strong>功能</strong>: 更改文件或目录的所属组。<br>
<strong>语法</strong>: <code>chgrp [选项] 组 文件/目录</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-R</code>: 递归更改。</li>
<li><code>-v</code>: 显示更改过程。<br>
<strong>场景</strong>: 调整文件所属组，管理团队访问权限。<br>
<strong>示例</strong>:</li>
<li><code>chgrp developers project</code>: 将 <code>project</code> 的所属组改为 <code>developers</code>。</li>
<li><code>chgrp -R staff /shared</code>: 递归更改 <code>/shared</code> 的组。</li>
</ul>
</li>
</ul>
<h4 id="10.-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B%E4%B8%8E%E6%93%8D%E4%BD%9C" tabindex="-1">10. 文件查看与操作</h4>
<ul>
<li>
<p><strong>cat</strong><br>
<strong>功能</strong>: 连接并显示文件内容，或创建文件。<br>
<strong>语法</strong>: <code>cat [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n</code>: 显示行号。</li>
<li><code>-E</code>: 显示行尾的 <code>$</code> 符号。</li>
<li><code>-s</code>: 压缩连续空行。<br>
<strong>场景</strong>: 查看小文件内容、合并文件。<br>
<strong>示例</strong>:</li>
<li><code>cat file.txt</code>: 显示 <code>file.txt</code> 内容。</li>
<li><code>cat file1.txt file2.txt &gt; combined.txt</code>: 合并文件到 <code>combined.txt</code>。</li>
<li><code>cat -n log.txt</code>: 显示 <code>log.txt</code> 带行号的内容。</li>
</ul>
</li>
<li>
<p><strong>less</strong><br>
<strong>功能</strong>: 分页查看文件内容，支持上下滚动。<br>
<strong>语法</strong>: <code>less [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-N</code>: 显示行号。</li>
<li><code>-S</code>: 不换行显示长行。</li>
<li><code>-i</code>: 忽略搜索大小写。<br>
<strong>场景</strong>: 查看大文件、浏览日志。<br>
<strong>示例</strong>:</li>
<li><code>less /var/log/syslog</code>: 分页查看系统日志。</li>
<li><code>less -N config.conf</code>: 显示带行号的配置文件。</li>
</ul>
</li>
<li>
<p><strong>more</strong><br>
<strong>功能</strong>: 分页查看文件内容（较老，功能少于 <code>less</code>）。<br>
<strong>语法</strong>: <code>more [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-d</code>: 显示交互提示。</li>
<li><code>+num</code>: 从第 <code>num</code> 行开始显示。<br>
<strong>场景</strong>: 快速查看文件内容。<br>
<strong>示例</strong>:</li>
<li><code>more file.txt</code>: 分页显示 <code>file.txt</code>。</li>
<li><code>more +50 log.txt</code>: 从第 50 行开始显示。</li>
</ul>
</li>
<li>
<p><strong>head</strong><br>
<strong>功能</strong>: 显示文件开头几行（默认 10 行）。<br>
<strong>语法</strong>: <code>head [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n 行数</code>: 指定显示行数。</li>
<li><code>-c 字节数</code>: 显示指定字节数。<br>
<strong>场景</strong>: 查看文件开头，检查日志或配置文件。<br>
<strong>示例</strong>:</li>
<li><code>head -n 5 file.txt</code>: 显示 <code>file.txt</code> 前 5 行。</li>
<li><code>head -c 100 log.txt</code>: 显示 <code>log.txt</code> 前 100 字节。</li>
</ul>
</li>
<li>
<p><strong>tail</strong><br>
<strong>功能</strong>: 显示文件末尾几行（默认 10 行）。<br>
<strong>语法</strong>: <code>tail [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n 行数</code>: 指定显示行数。</li>
<li><code>-f</code>: 实时监控文件变化。<br>
<strong>场景</strong>: 监控日志文件、查看最新数据。<br>
<strong>示例</strong>:</li>
<li><code>tail -n 20 log.txt</code>: 显示 <code>log.txt</code> 最后 20 行。</li>
<li><code>tail -f /var/log/syslog</code>: 实时监控系统日志。</li>
</ul>
</li>
</ul>
<h4 id="11.-%E5%85%B6%E4%BB%96%E9%AB%98%E7%BA%A7%E5%91%BD%E4%BB%A4" tabindex="-1">11. 其他高级命令</h4>
<ul>
<li>
<p><strong>file</strong><br>
<strong>功能</strong>: 确定文件类型（如文本、二进制、目录）。<br>
<strong>语法</strong>: <code>file [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-i</code>: 输出 MIME 类型。</li>
<li><code>-b</code>: 仅输出文件类型，不包括文件名。<br>
<strong>场景</strong>: 识别文件格式，排查未知文件。<br>
<strong>示例</strong>:</li>
<li><code>file image.png</code>: 显示 <code>image.png</code> 的类型（如 PNG image）。</li>
<li><code>file -i /bin/ls</code>: 输出 <code>/bin/ls</code> 的 MIME 类型。</li>
</ul>
</li>
<li>
<p><strong>stat</strong><br>
<strong>功能</strong>: 显示文件或文件系统的详细状态信息（如时间戳、权限、inode）。<br>
<strong>语法</strong>: <code>stat [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-f</code>: 显示文件系统状态而非文件。</li>
<li><code>-c 格式</code>: 自定义输出格式。<br>
<strong>场景</strong>: 调试文件系统问题、查看元数据。<br>
<strong>示例</strong>:</li>
<li><code>stat file.txt</code>: 显示 <code>file.txt</code> 的详细信息。</li>
<li><code>stat -c %s file.txt</code>: 仅输出文件大小（字节）。</li>
</ul>
</li>
<li>
<p><strong>truncate</strong><br>
<strong>功能</strong>: 调整文件大小（扩展或截断）。<br>
<strong>语法</strong>: <code>truncate [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-s 大小</code>: 设置文件大小（如 <code>+10M</code> 扩展 10MB，<code>-10M</code> 减少 10MB）。</li>
<li><code>-c</code>: 不创建不存在的文件。<br>
<strong>场景</strong>: 创建固定大小文件、清理大文件内容。<br>
<strong>示例</strong>:</li>
<li><code>truncate -s 10M bigfile</code>: 创建或调整 <code>bigfile</code> 为 10MB。</li>
<li><code>truncate -s 0 log.txt</code>: 清空 <code>log.txt</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="2.-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B%E5%92%8C%E7%BC%96%E8%BE%91%EF%BC%88file-viewing-%26-editing%EF%BC%89" tabindex="-1">2. 文件查看和编辑（File Viewing &amp; Editing）</h2>
<h4 id="1.-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%9F%A5%E7%9C%8B" tabindex="-1">1. 文件内容查看</h4>
<p>这些命令用于快速查看文件内容，适合不同场景（如小文件、大文件、实时监控等）。</p>
<ul>
<li>
<p><strong>cat</strong><br>
<strong>功能</strong>: 连接并显示文件内容，或将多个文件内容合并输出，也可用于创建文件。<br>
<strong>语法</strong>: <code>cat [选项] [文件...]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n</code>: 显示行号（包括空行）。</li>
<li><code>-b</code>: 显示非空行号。</li>
<li><code>-E</code>: 在行尾显示 <code>$</code> 符号。</li>
<li><code>-s</code>: 压缩连续空行为一空行。</li>
<li><code>-T</code>: 显示制表符为 <code>^I</code>。<br>
<strong>场景</strong>:</li>
<li>查看小型文本文件内容（如配置文件）。</li>
<li>合并多个文件输出到终端或新文件。</li>
<li>通过重定向快速创建小文件。<br>
<strong>示例</strong>:</li>
<li><code>cat config.txt</code>: 显示 <code>config.txt</code> 的内容。</li>
<li><code>cat -n log.txt</code>: 显示 <code>log.txt</code> 内容并带行号。</li>
<li><code>cat file1.txt file2.txt &gt; combined.txt</code>: 合并两个文件到 <code>combined.txt</code>。</li>
<li><code>cat &gt; newfile.txt</code>: 接受用户输入创建新文件（按 Ctrl+D 保存退出）。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>cat access.log | grep &quot;error&quot;</code>: 筛选包含 “error” 的行。</li>
<li>查看二进制文件（谨慎）：<code>cat -v binaryfile</code> 显示不可打印字符。<br>
<strong>注意</strong>: 对于大文件，<code>cat</code> 一次性输出可能导致终端卡顿，建议使用 <code>less</code> 或 <code>tail</code>。</li>
</ul>
</li>
<li>
<p><strong>less</strong><br>
<strong>功能</strong>: 分页查看文件内容，支持上下滚动、前后搜索，适合大文件。<br>
<strong>语法</strong>: <code>less [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-N</code>: 显示行号。</li>
<li><code>-S</code>: 不换行显示长行（水平滚动）。</li>
<li><code>-i</code>: 搜索时忽略大小写。</li>
<li><code>-m</code>: 显示类似 <code>more</code> 的百分比提示。</li>
<li><code>-F</code>: 若文件较小，直接显示并退出。<br>
<strong>场景</strong>:</li>
<li>浏览大型日志文件（如 <code>/var/log/syslog</code>）。</li>
<li>在配置文件中搜索特定内容。</li>
<li>查看长文档而无需加载全部内容。<br>
<strong>交互键</strong>:</li>
<li>上下箭头或 <code>j</code>/<code>k</code>: 上下移动。</li>
<li><code>/关键字</code>: 向前搜索。</li>
<li><code>?关键字</code>: 向后搜索。</li>
<li><code>q</code>: 退出。</li>
<li><code>g</code>/<code>G</code>: 跳到文件开头/结尾。<br>
<strong>示例</strong>:</li>
<li><code>less /var/log/syslog</code>: 分页查看系统日志。</li>
<li><code>less -N config.conf</code>: 显示带行号的配置文件。</li>
<li><code>less +/error log.txt</code>: 打开文件并跳转到第一个 “error” 出现处。<br>
<strong>高级用法</strong>:</li>
<li>实时监控：<code>less +F log.txt</code>（类似 <code>tail -f</code>，按 Ctrl+C 切换交互模式）。</li>
<li>多个文件：<code>less file1.txt file2.txt</code>，使用 <code>:n</code> 和 <code>:p</code> 切换文件。<br>
<strong>注意</strong>: <code>less</code> 比 <code>more</code> 更强大，支持双向滚动和搜索。</li>
</ul>
</li>
<li>
<p><strong>more</strong><br>
<strong>功能</strong>: 分页查看文件内容，仅支持向下滚动，功能较 <code>less</code> 简单。<br>
<strong>语法</strong>: <code>more [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-d</code>: 显示交互提示（如按空格继续）。</li>
<li><code>+num</code>: 从第 <code>num</code> 行开始显示。</li>
<li><code>-s</code>: 压缩连续空行。</li>
<li><code>-p</code>: 清屏后显示。<br>
<strong>场景</strong>:</li>
<li>快速查看中小型文件内容。</li>
<li>在资源受限的系统上替代 <code>less</code>。<br>
<strong>交互键</strong>:</li>
<li>空格: 下一页。</li>
<li><code>Enter</code>: 下一行。</li>
<li><code>q</code>: 退出。</li>
<li><code>/关键字</code>: 搜索。<br>
<strong>示例</strong>:</li>
<li><code>more file.txt</code>: 分页显示 <code>file.txt</code>。</li>
<li><code>more +50 log.txt</code>: 从第 50 行开始显示。</li>
<li><code>more -s data.txt</code>: 压缩空行后显示。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>ls -l | more</code>: 分页显示目录列表。<br>
<strong>注意</strong>: <code>more</code> 功能有限，推荐优先使用 <code>less</code>。</li>
</ul>
</li>
<li>
<p><strong>head</strong><br>
<strong>功能</strong>: 显示文件开头几行（默认 10 行），适合快速检查文件。<br>
<strong>语法</strong>: <code>head [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n 行数</code>: 指定显示行数。</li>
<li><code>-c 字节数</code>: 显示指定字节数。</li>
<li><code>-q</code>: 多个文件时不显示文件名。</li>
<li><code>-v</code>: 显示文件名标题。<br>
<strong>场景</strong>:</li>
<li>查看日志或配置文件的开头。</li>
<li>提取 CSV 文件的表头。<br>
<strong>示例</strong>:</li>
<li><code>head -n 5 file.txt</code>: 显示 <code>file.txt</code> 前 5 行。</li>
<li><code>head -c 100 log.txt</code>: 显示 <code>log.txt</code> 前 100 字节。</li>
<li><code>head *.txt</code>: 显示当前目录下所有 <code>.txt</code> 文件的前 10 行。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>head -n 1 data.csv | cut -d',' -f1</code>: 提取 CSV 文件第一列的表头。<br>
<strong>注意</strong>: 对于二进制文件，<code>-c</code> 选项更适合。</li>
</ul>
</li>
<li>
<p><strong>tail</strong><br>
<strong>功能</strong>: 显示文件末尾几行（默认 10 行），支持实时监控。<br>
<strong>语法</strong>: <code>tail [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n 行数</code>: 指定显示行数。</li>
<li><code>-f</code>: 实时监控文件变化（常用于日志）。</li>
<li><code>-F</code>: 监控文件，即使文件被替换。</li>
<li><code>-c 字节数</code>: 显示指定字节数。<br>
<strong>场景</strong>:</li>
<li>实时监控日志文件（如服务器错误日志）。</li>
<li>查看文件最新内容。<br>
<strong>示例</strong>:</li>
<li><code>tail -n 20 log.txt</code>: 显示 <code>log.txt</code> 最后 20 行。</li>
<li><code>tail -f /var/log/apache2/access.log</code>: 实时监控 Apache 访问日志。</li>
<li><code>tail -c 500 data.bin</code>: 显示 <code>data.bin</code> 最后 500 字节。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>tail -f log.txt | grep &quot;error&quot;</code>: 实时筛选日志中的错误。</li>
<li>监控多个文件：<code>tail -f file1.txt file2.txt</code>: 显示多个文件尾部。<br>
<strong>注意</strong>: 使用 <code>-f</code> 时，需按 Ctrl+C 退出监控。</li>
</ul>
</li>
</ul>
<h4 id="2.-%E6%96%87%E4%BB%B6%E7%BC%96%E8%BE%91" tabindex="-1">2. 文件编辑</h4>
<p>这些命令用于编辑文本文件，适合从简单修改到复杂脚本编写。</p>
<ul>
<li>
<p><strong>nano</strong><br>
<strong>功能</strong>: 简单、用户友好的终端文本编辑器，适合初学者。<br>
<strong>语法</strong>: <code>nano [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-w</code>: 禁用自动换行。</li>
<li><code>-i</code>: 自动缩进。</li>
<li><code>-l</code>: 显示行号。</li>
<li><code>-m</code>: 启用鼠标支持（若终端支持）。</li>
<li><code>-B</code>: 保存前备份文件。<br>
<strong>场景</strong>:</li>
<li>编辑配置文件（如 <code>/etc/apt/sources.list</code>）。</li>
<li>快速修改小型脚本或文本文件。<br>
<strong>交互键</strong>:</li>
<li><code>Ctrl+O</code>: 保存文件。</li>
<li><code>Ctrl+X</code>: 退出。</li>
<li><code>Ctrl+W</code>: 搜索。</li>
<li><code>Ctrl+\</code>: 替换。</li>
<li><code>Ctrl+G</code>: 查看帮助。<br>
<strong>示例</strong>:</li>
<li><code>nano config.txt</code>: 打开或创建 <code>config.txt</code> 进行编辑。</li>
<li><code>sudo nano -l /etc/fstab</code>: 以 root 权限编辑文件系统表并显示行号。</li>
<li><code>nano -B script.sh</code>: 编辑脚本并备份原文件。<br>
<strong>高级用法</strong>:</li>
<li>语法高亮：<code>nano</code> 默认支持常见文件类型的高亮，可通过 <code>~/.nanorc</code> 自定义。</li>
<li>打开特定行：<code>nano +10 file.txt</code> 直接跳转到第 10 行。<br>
<strong>注意</strong>: <code>nano</code> 适合快速编辑，复杂任务建议使用 <code>vim</code> 或 IDE。</li>
</ul>
</li>
<li>
<p><strong>vim</strong> / <strong>vi</strong><br>
<strong>功能</strong>: 功能强大的终端文本编辑器，支持模式化操作，适合高级用户。<br>
<strong>语法</strong>: <code>vim [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-R</code>: 只读模式（等同于 <code>view</code> 命令）。</li>
<li><code>-o</code>: 水平分割打开多个文件。</li>
<li><code>-O</code>: 垂直分割打开多个文件。</li>
<li><code>+行号</code>: 打开文件并跳转到指定行。<br>
<strong>模式</strong>:</li>
<li><strong>正常模式</strong>: 默认模式，用于导航和命令。</li>
<li><strong>插入模式</strong>: 输入 <code>i</code> 进入，用于编辑文本。</li>
<li><strong>命令模式</strong>: 输入 <code>:</code> 进入，用于执行命令（如 <code>:w</code> 保存，<code>:q</code> 退出）。</li>
<li><strong>可视模式</strong>: 输入 <code>v</code> 或 <code>V</code> 进入，用于选择文本。<br>
<strong>场景</strong>:</li>
<li>编辑复杂脚本、配置文件或代码。</li>
<li>批量文本处理（如搜索替换）。<br>
<strong>常用命令</strong>:</li>
<li><code>:w</code>: 保存文件。</li>
<li><code>:q</code>: 退出。</li>
<li><code>:wq</code> 或 <code>ZZ</code>: 保存并退出。</li>
<li><code>/关键字</code>: 搜索。</li>
<li><code>:%s/old/new/g</code>: 全局替换 <code>old</code> 为 <code>new</code>。</li>
<li><code>dd</code>: 删除当前行。</li>
<li><code>yy</code>: 复制当前行。</li>
<li><code>p</code>: 粘贴。<br>
<strong>示例</strong>:</li>
<li><code>vim script.py</code>: 编辑 Python 脚本。</li>
<li><code>sudo vim -o /etc/file1 /etc/file2</code>: 同时编辑两个配置文件。</li>
<li><code>vim +50 log.txt</code>: 打开 <code>log.txt</code> 并跳转到第 50 行。<br>
<strong>高级用法</strong>:</li>
<li>插件支持：通过 <code>~/.vimrc</code> 配置插件（如语法高亮、自动补全）。</li>
<li>批量操作：<code>vim file1 file2</code> 并用 <code>:n</code> 切换文件。</li>
<li>宏录制：按 <code>q</code> 录制宏，重复复杂操作。<br>
<strong>注意</strong>: 学习曲线较陡，建议初学者从 <code>nano</code> 开始，或使用 <code>vimtutor</code> 学习。</li>
</ul>
</li>
<li>
<p><strong>ed</strong><br>
<strong>功能</strong>: 经典行编辑器，功能简单，适合脚本或低资源环境。<br>
<strong>语法</strong>: <code>ed [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-p 提示</code>: 设置自定义提示符。</li>
<li><code>-s</code>: 静默模式，减少输出。<br>
<strong>场景</strong>:</li>
<li>在嵌入式系统或无 <code>nano</code>/<code>vim</code> 的环境中编辑文件。</li>
<li>脚本中自动化编辑。<br>
<strong>常用命令</strong>:</li>
<li><code>a</code>: 追加文本。</li>
<li><code>w</code>: 保存文件。</li>
<li><code>q</code>: 退出。</li>
<li><code>,p</code>: 显示全部内容。<br>
<strong>示例</strong>:</li>
<li><code>ed file.txt</code>: 打开 <code>file.txt</code> 进行行编辑。</li>
<li><code>echo -e &quot;1i\nHello\n.\nw\nq&quot; | ed file.txt</code>: 插入 “Hello” 并保存。<br>
<strong>高级用法</strong>:</li>
<li>脚本化编辑：<code>ed file.txt &lt; script.ed</code> 使用预定义命令编辑文件。<br>
<strong>注意</strong>: <code>ed</code> 操作复杂，现代系统较少使用，推荐 <code>nano</code> 或 <code>vim</code>。</li>
</ul>
</li>
</ul>
<h4 id="3.-%E6%96%87%E6%9C%AC%E8%BE%93%E5%87%BA%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91" tabindex="-1">3. 文本输出与重定向</h4>
<ul>
<li>
<p><strong>echo</strong><br>
<strong>功能</strong>: 输出文本到终端或文件，常用于脚本或创建简单内容。<br>
<strong>语法</strong>: <code>echo [选项] 字符串</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-n</code>: 不添加换行符。</li>
<li><code>-e</code>: 启用转义字符解释（如 <code>\n</code> 表示换行）。<br>
<strong>场景</strong>:</li>
<li>快速创建小文件。</li>
<li>在脚本中输出变量或提示。<br>
<strong>示例</strong>:</li>
<li><code>echo &quot;Hello World&quot; &gt; file.txt</code>: 将文本写入 <code>file.txt</code>。</li>
<li><code>echo -e &quot;Line1\nLine2&quot; &gt;&gt; file.txt</code>: 追加两行到 <code>file.txt</code>。</li>
<li><code>echo $PATH</code>: 显示环境变量 <code>PATH</code>。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>echo &quot;Error&quot; | tee -a log.txt</code>: 输出到终端并追加到文件。</li>
<li>变量扩展：<code>echo &quot;User: $USER&quot; &gt; user.txt</code>: 写入当前用户名。<br>
<strong>注意</strong>: 对于复杂输出，考虑使用 <code>printf</code>。</li>
</ul>
</li>
<li>
<p><strong>printf</strong><br>
<strong>功能</strong>: 格式化输出文本到终端或文件，支持复杂格式化。<br>
<strong>语法</strong>: <code>printf 格式字符串 [参数...]</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li>格式占位符：<code>%s</code>（字符串）、<code>%d</code>（整数）、<code>%f</code>（浮点数）。<br>
<strong>场景</strong>:</li>
<li>创建格式化配置文件。</li>
<li>在脚本中生成结构化输出。<br>
<strong>示例</strong>:</li>
<li><code>printf &quot;Name: %s, Age: %d\n&quot; &quot;Alice&quot; 25</code>: 输出格式化文本。</li>
<li><code>printf &quot;Value: %.2f\n&quot; 3.14159 &gt; data.txt</code>: 写入格式化浮点数。<br>
<strong>高级用法</strong>:</li>
<li>循环输出：<code>for i in &#123;1..3&#125;; do printf &quot;Item %d\n&quot; $i; done</code> 生成序列。<br>
<strong>注意</strong>: <code>printf</code> 比 <code>echo</code> 更适合需要精确格式的场景。</li>
</ul>
</li>
</ul>
<h4 id="4.-%E9%AB%98%E7%BA%A7%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%E9%87%8D%E5%8F%A0%E6%90%9C%E7%B4%A2%2F%E5%A4%84%E7%90%86%EF%BC%89" tabindex="-1">4. 高级文本处理（部分重叠搜索/处理）</h4>
<p>以下命令虽常用于文本处理，但也可用于查看和编辑场景。</p>
<ul>
<li>
<p><strong>tee</strong><br>
<strong>功能</strong>: 从标准输入读取数据，同时输出到终端和文件。<br>
<strong>语法</strong>: <code>tee [选项] 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-a</code>: 追加而非覆盖文件。</li>
<li><code>-i</code>: 忽略中断信号。<br>
<strong>场景</strong>:</li>
<li>保存命令输出到文件并同时查看。</li>
<li>在管道中记录中间结果。<br>
<strong>示例</strong>:</li>
<li><code>ls -l | tee dirlist.txt</code>: 保存目录列表到 <code>dirlist.txt</code> 并显示。</li>
<li><code>echo &quot;Log entry&quot; | tee -a log.txt</code>: 追加日志条目到 <code>log.txt</code>。<br>
<strong>高级用法</strong>:</li>
<li>多文件输出：<code>ls | tee file1.txt file2.txt</code>: 写入多个文件。</li>
<li>结合 <code>sudo</code>：<code>ls /root | sudo tee rootlist.txt</code>: 保存受限目录列表。<br>
<strong>注意</strong>: 需注意文件权限，尤其是使用 <code>sudo</code> 时。</li>
</ul>
</li>
<li>
<p><strong>sed</strong><br>
<strong>功能</strong>: 流编辑器，用于文本替换、删除、插入等操作。<br>
<strong>语法</strong>: <code>sed [选项] '命令' 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-i</code>: 直接修改原文件（建议备份）。</li>
<li><code>-e</code>: 执行多个命令。</li>
<li><code>-r</code>: 使用扩展正则表达式。<br>
<strong>常用命令</strong>:</li>
<li><code>s/old/new/g</code>: 全局替换 <code>old</code> 为 <code>new</code>。</li>
<li><code>d</code>: 删除匹配行。</li>
<li><code>p</code>: 打印匹配行。<br>
<strong>场景</strong>:</li>
<li>批量修改配置文件内容。</li>
<li>提取特定行或字段。<br>
<strong>示例</strong>:</li>
<li><code>sed 's/error/warning/g' log.txt</code>: 将 <code>log.txt</code> 中的 “error” 替换为 “warning”。</li>
<li><code>sed -i.bak 's/old/new/' file.txt</code>: 替换并备份原文件到 <code>file.txt.bak</code>。</li>
<li><code>sed '10,20d' data.txt</code>: 删除第 10 到 20 行。<br>
<strong>高级用法</strong>:</li>
<li>结合管道：<code>cat config.txt | sed '/^#/d'</code>: 删除注释行。</li>
<li>多条件替换：<code>sed -e 's/old1/new1/' -e 's/old2/new2/' file.txt</code>。<br>
<strong>注意</strong>: <code>-i</code> 修改文件不可恢复，建议测试后使用。</li>
</ul>
</li>
<li>
<p><strong>awk</strong><br>
<strong>功能</strong>: 文本处理工具，适合处理结构化数据（如 CSV、日志）。<br>
<strong>语法</strong>: <code>awk [选项] '程序' 文件</code><br>
<strong>常用选项</strong>:</p>
<ul>
<li><code>-F 分隔符</code>: 指定字段分隔符。</li>
<li><code>-v 变量=值</code>: 定义变量。<br>
<strong>常用程序</strong>:</li>
<li><code>&#123;print $n&#125;</code>: 打印第 n 列。</li>
<li><code>/模式/ &#123;动作&#125;</code>: 对匹配模式执行动作。<br>
<strong>场景</strong>:</li>
<li>提取日志或 CSV 文件的特定字段。</li>
<li>统计和格式化文本数据。<br>
<strong>示例</strong>:</li>
<li><code>awk -F',' '&#123;print $1&#125;' data.csv</code>: 打印 CSV 文件第一列。</li>
<li><code>awk '/error/ &#123;print&#125;' log.txt</code>: 打印包含 “error” 的行。</li>
<li><code>awk '&#123;sum+=$2&#125; END &#123;print sum&#125;' numbers.txt</code>: 计算第二列总和。<br>
<strong>高级用法</strong>:</li>
<li>复杂脚本：<code>awk 'BEGIN &#123;print &quot;Start&quot;&#125; &#123;print $1&#125; END &#123;print &quot;End&quot;&#125;' file.txt</code>。</li>
<li>结合管道：<code>cat log.txt | awk '$3 &gt; 100 &#123;print&#125;'</code>: 筛选第三列大于 100 的行。<br>
<strong>注意</strong>: <code>awk</code> 功能强大，适合数据处理，但学习曲线稍陡。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="3.-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%EF%BC%88permissions%EF%BC%89" tabindex="-1">3. 权限管理（Permissions）</h2>
<p>权限管理是 Linux 系统中确保安全和访问控制的核心功能，涉及文件和目录的所有者、所属组、访问权限（读、写、执行）以及特殊权限（如 setuid）。Ubuntu 使用基于用户（user）、组（group）和其他人（others）的权限模型，结合文件系统元数据实现访问控制。以下是与权限管理相关的核心命令及其详细说明。</p>
<h4 id="1.-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" tabindex="-1">1. 权限管理基础知识</h4>
<p>在讲解命令之前，先简要介绍 Linux 文件权限模型，以便理解命令的作用：</p>
<ul>
<li><strong>权限组成</strong>：
<ul>
<li><strong>用户（u）</strong>: 文件的所有者。</li>
<li><strong>组（g）</strong>: 文件所属的组。</li>
<li><strong>其他人（o）</strong>: 非所有者、非组成员的用户。</li>
<li><strong>权限类型</strong>：
<ul>
<li><code>r</code>（读，read）：允许查看文件内容或列出目录。</li>
<li><code>w</code>（写，write）：允许修改文件内容或在目录中创建/删除文件。</li>
<li><code>x</code>（执行，execute）：允许运行文件（如脚本或二进制文件）或进入目录。</li>
</ul>
</li>
<li><strong>特殊权限</strong>：
<ul>
<li><code>setuid</code>（s）：以文件所有者身份执行（常见于 <code>/usr/bin/passwd</code>）。</li>
<li><code>setgid</code>（s）：以文件所属组身份执行，或目录中新建文件继承父目录组。</li>
<li><code>sticky bit</code>（t）：限制目录中文件的删除（仅限文件所有者或 root，如 <code>/tmp</code>）。</li>
</ul>
</li>
</ul>
</li>
<li><strong>权限表示</strong>：
<ul>
<li><strong>符号表示</strong>：如 <code>rwxr-xr-x</code>（用户读写执行，组和其他读执行）。</li>
<li><strong>八进制表示</strong>：如 <code>755</code>（<code>rwx=4+2+1=7</code>, <code>r-x=4+1=5</code>）。</li>
</ul>
</li>
<li><strong>查看权限</strong>：使用 <code>ls -l</code> 查看文件权限，如：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwxr-xr-x 1 user group 1234 Sep 14 12:00 script.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个字符（<code>-</code> 表示文件，<code>d</code> 表示目录）。</li>
<li>接下来 9 个字符表示用户（<code>rwx</code>）、组（<code>r-x</code>）、其他（<code>r-x</code>）权限。</li>
<li><code>1</code> 表示硬链接数，<code>user</code> 是所有者，<code>group</code> 是所属组。</li>
</ul>
</li>
</ul>
<h4 id="2.-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4" tabindex="-1">2. 权限管理命令</h4>
<h5 id="2.1-chmod%EF%BC%88change-mode%EF%BC%89" tabindex="-1">2.1 chmod（Change Mode）</h5>
<p><strong>功能</strong>：修改文件或目录的访问权限（读、写、执行）及特殊权限。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod [选项] 权限 文件/目录</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-R</code>：递归修改目录及其内容。</li>
<li><code>-v</code>：显示修改过程。</li>
<li><code>-c</code>：仅显示更改的文件。</li>
<li><code>--reference=参考文件</code>：使用参考文件的权限。<br>
<strong>权限指定方式</strong>：</li>
<li><strong>符号表示</strong>：
<ul>
<li>格式：<code>[ugoa][+-=][rwxXst]</code></li>
<li><code>u</code>（用户）、<code>g</code>（组）、<code>o</code>（其他）、<code>a</code>（所有）。</li>
<li><code>+</code>（添加）、<code>-</code>（移除）、<code>=</code>（设置）。</li>
<li><code>r</code>（读）、<code>w</code>（写）、<code>x</code>（执行）、<code>X</code>（仅对目录或已有执行权限的文件添加执行）、<code>s</code>（setuid/setgid）、<code>t</code>（sticky bit）。</li>
</ul>
</li>
<li><strong>八进制表示</strong>：
<ul>
<li>读（4）、写（2）、执行（1），相加组成三位数。</li>
<li>如 <code>755</code> 表示 <code>rwxr-xr-x</code>，<code>600</code> 表示 <code>rw-------</code>。<br>
<strong>场景</strong>：</li>
</ul>
</li>
<li>设置脚本可执行权限。</li>
<li>保护敏感文件（如私钥）。</li>
<li>配置共享目录权限。<br>
<strong>示例</strong>：</li>
<li><code>chmod 644 file.txt</code>：设置文件为所有者读写（<code>rw-</code>），组和其他只读（<code>r--</code>）。</li>
<li><code>chmod u+x script.sh</code>：为所有者添加执行权限。</li>
<li><code>chmod -R 755 /web</code>：递归设置 <code>/web</code> 目录及内容为 <code>rwxr-xr-x</code>。</li>
<li><code>chmod +t /tmp</code>：为 <code>/tmp</code> 设置 sticky bit，限制非所有者删除文件。</li>
<li><code>chmod --reference=template.txt file.txt</code>：将 <code>file.txt</code> 权限设为与 <code>template.txt</code> 相同。<br>
<strong>高级用法</strong>：</li>
<li>设置特殊权限：
<ul>
<li><code>chmod u+s /bin/program</code>：设置 setuid，程序以所有者身份运行。</li>
<li><code>chmod g+s /shared</code>：目录中新建文件继承 <code>shared</code> 组。</li>
</ul>
</li>
<li>条件修改：
<ul>
<li><code>chmod -R u+w,g-w,o-rwx /data</code>：用户添加写权限，组移除写权限，其他移除所有权限。</li>
</ul>
</li>
<li>结合 <code>find</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path -type f -exec chmod 644 &#123;&#125; \;</span><br></pre></td></tr></table></figure>
将目录下所有文件设为 <code>644</code>。<br>
<strong>注意</strong>：</li>
<li>使用八进制更简洁，符号表示更灵活。</li>
<li>递归修改（<code>-R</code>）需谨慎，避免意外更改子目录权限。</li>
<li>特殊权限（如 <code>setuid</code>）可能引入安全风险，需仔细验证。</li>
</ul>
<h5 id="2.2-chown%EF%BC%88change-owner%EF%BC%89" tabindex="-1">2.2 chown（Change Owner）</h5>
<p><strong>功能</strong>：更改文件或目录的所有者和/或所属组。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [选项] 用户[:组] 文件/目录</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-R</code>：递归更改目录及其内容。</li>
<li><code>-v</code>：显示更改过程。</li>
<li><code>-c</code>：仅显示更改的文件。</li>
<li><code>--reference=参考文件</code>：使用参考文件的所有者/组。</li>
<li><code>--from=当前用户:当前组</code>：仅更改匹配当前用户/组的文件。<br>
<strong>参数</strong>：</li>
<li><code>用户</code>：用户名或 UID（如 <code>#1000</code>）。</li>
<li><code>组</code>：组名或 GID（如 <code>#1000</code>），可省略（如 <code>chown user file</code>）。<br>
<strong>场景</strong>：</li>
<li>转移文件所有权（如将备份文件交给其他用户）。</li>
<li>修复错误的所有者/组设置。</li>
<li>配置共享目录的组访问。<br>
<strong>示例</strong>：</li>
<li><code>sudo chown user1 file.txt</code>：将 <code>file.txt</code> 的所有者改为 <code>user1</code>。</li>
<li><code>sudo chown user1:group1 data.txt</code>：设置所有者和组为 <code>user1:group1</code>。</li>
<li><code>sudo chown -R user1:group1 /data</code>：递归更改 <code>/data</code> 的所有者和组。</li>
<li><code>sudo chown --reference=template.txt file.txt</code>：将 <code>file.txt</code> 的所有者/组设为与 <code>template.txt</code> 相同。</li>
<li><code>sudo chown --from=user2:group2 user1:group1 file.txt</code>：仅当文件属于 <code>user2:group2</code> 时更改。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>find</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path -type d -exec chown user1:group1 &#123;&#125; \;</span><br></pre></td></tr></table></figure>
将目录下所有子目录的所有者和组改为 <code>user1:group1</code>。</li>
<li>只更改组：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown :group1 file.txt</span><br></pre></td></tr></table></figure>
仅更改所属组。<br>
<strong>注意</strong>：</li>
<li>通常需要 <code>sudo</code> 权限更改系统文件或非当前用户拥有的文件。</li>
<li>UID/GID 格式（如 <code>#1000</code>）需在某些 shell 中转义（如 <code>\#1000</code>）。</li>
<li>递归操作（<code>-R</code>）需检查目标范围，避免影响无关文件。</li>
</ul>
<h5 id="2.3-chgrp%EF%BC%88change-group%EF%BC%89" tabindex="-1">2.3 chgrp（Change Group）</h5>
<p><strong>功能</strong>：更改文件或目录的所属组（功能是 <code>chown</code> 的子集）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chgrp [选项] 组 文件/目录</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-R</code>：递归更改。</li>
<li><code>-v</code>：显示更改过程。</li>
<li><code>-c</code>：仅显示更改的文件。</li>
<li><code>--reference=参考文件</code>：使用参考文件的组。<br>
<strong>参数</strong>：</li>
<li><code>组</code>：组名或 GID（如 <code>#1000</code>）。<br>
<strong>场景</strong>：</li>
<li>设置共享目录的组权限（如团队协作目录）。</li>
<li>修复组分配错误。<br>
<strong>示例</strong>：</li>
<li><code>sudo chgrp developers project</code>：将 <code>project</code> 的所属组改为 <code>developers</code>。</li>
<li><code>sudo chgrp -R staff /shared</code>：递归更改 <code>/shared</code> 的组为 <code>staff</code>。</li>
<li><code>sudo chgrp --reference=template.txt file.txt</code>：将 <code>file.txt</code> 的组设为与 <code>template.txt</code> 相同。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>find</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path -type f -exec chgrp users &#123;&#125; \;</span><br></pre></td></tr></table></figure>
将目录下所有文件的组改为 <code>users</code>。</li>
<li>设置目录继承组：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+s /shared &amp;&amp; chgrp staff /shared</span><br></pre></td></tr></table></figure>
确保 <code>/shared</code> 中新建文件继承 <code>staff</code> 组。<br>
<strong>注意</strong>：</li>
<li><code>chgrp</code> 是 <code>chown</code> 的简化版，推荐优先使用 <code>chown :group</code>。</li>
<li>需要 <code>sudo</code> 更改非当前用户组的文件。</li>
</ul>
<h5 id="2.4-setfacl%EF%BC%88set-file-access-control-list%EF%BC%89" tabindex="-1">2.4 setfacl（Set File Access Control List）</h5>
<p><strong>功能</strong>：设置访问控制列表（ACL），为文件或目录分配更细粒度的权限（如特定用户/组的权限）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl [选项] -m|-x 规则 文件/目录</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-m</code>：添加或修改 ACL 规则。</li>
<li><code>-x</code>：删除指定 ACL 规则。</li>
<li><code>-R</code>：递归应用。</li>
<li><code>-b</code>：删除所有 ACL 规则。</li>
<li><code>--set</code>：完全替换 ACL。</li>
<li><code>-d</code>：设置默认 ACL（目录中新文件继承）。<br>
<strong>规则格式</strong>：</li>
<li><code>u:用户:权限</code>：为特定用户设置权限（如 <code>u:user1:rwx</code>）。</li>
<li><code>g:组:权限</code>：为特定组设置权限。</li>
<li><code>m:权限</code>：设置掩码（限制 ACL 权限）。</li>
<li><code>o:权限</code>：设置其他用户权限。<br>
<strong>场景</strong>：</li>
<li>为特定用户/组设置权限，而不影响标准权限。</li>
<li>配置共享目录的复杂访问控制。<br>
<strong>示例</strong>：</li>
<li><code>setfacl -m u:user1:rw file.txt</code>：为 <code>user1</code> 设置读写权限。</li>
<li><code>setfacl -R -m g:developers:rwx /project</code>：为 <code>developers</code> 组递归设置读写执行权限。</li>
<li><code>setfacl -d -m u:user1:rwx /shared</code>：目录中新文件默认授予 <code>user1</code> 读写执行权限。</li>
<li><code>setfacl -x u:user1 file.txt</code>：移除 <code>user1</code> 的 ACL 权限。</li>
<li><code>setfacl -b file.txt</code>：删除所有 ACL 规则。<br>
<strong>查看 ACL</strong>：</li>
<li><code>getfacl file.txt</code>：显示 <code>file.txt</code> 的 ACL 信息。<br>
<strong>高级用法</strong>：</li>
<li>结合标准权限：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 /data &amp;&amp; setfacl -m u:user1:rwx /data</span><br></pre></td></tr></table></figure>
限制目录仅限所有者和 <code>user1</code> 访问。</li>
<li>递归恢复默认 ACL：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -R -m d:g:staff:rwx /shared</span><br></pre></td></tr></table></figure>
确保目录及子目录新文件继承 <code>staff</code> 组权限。<br>
<strong>注意</strong>：</li>
<li>需要文件系统支持 ACL（如 ext4，需启用 <code>acl</code> 挂载选项）。</li>
<li>安装 ACL 工具：<code>sudo apt install acl</code>。</li>
<li>ACL 与标准权限（<code>chmod</code>）共存，掩码（<code>mask</code>）可能限制 ACL 权限。</li>
</ul>
<h5 id="2.5-umask%EF%BC%88user-mask%EF%BC%89" tabindex="-1">2.5 umask（User Mask）</h5>
<p><strong>功能</strong>：设置新建文件和目录的默认权限掩码，影响默认权限（文件默认 <code>666</code>，目录默认 <code>777</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umask [掩码]</span><br></pre></td></tr></table></figure>
<p><strong>掩码格式</strong>：</p>
<ul>
<li>八进制值，如 <code>022</code>（从默认权限减去掩码）。</li>
<li>结果：文件权限为 <code>666 - umask</code>，目录为 <code>777 - umask</code>。
<ul>
<li>如 <code>umask 022</code>，新建文件为 <code>644</code>（<code>rw-r--r--</code>），目录为 <code>755</code>（<code>rwxr-xr-x</code>）。<br>
<strong>场景</strong>：</li>
</ul>
</li>
<li>控制用户或脚本创建文件/目录的默认权限。</li>
<li>确保共享目录的安全性。<br>
<strong>示例</strong>：</li>
<li><code>umask 022</code>：设置掩码，新建文件为 <code>644</code>，目录为 <code>755</code>。</li>
<li><code>umask 077</code>：新建文件为 <code>600</code>（<code>rw-------</code>），目录为 <code>700</code>（<code>rwx------</code>）。</li>
<li>查看当前掩码：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umask</span><br></pre></td></tr></table></figure>
输出如 <code>0022</code>。</li>
<li>符号表示：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umask u=rwx,g=rx,o=rx</span><br></pre></td></tr></table></figure>
等同于 <code>022</code>。<br>
<strong>高级用法</strong>：</li>
<li>在 shell 配置文件（如 <code>~/.bashrc</code>）设置默认 <code>umask</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;umask 027&quot; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
新建文件为 <code>640</code>（<code>rw-r-----</code>），目录为 <code>750</code>（<code>rwxr-x---</code>）。</li>
<li>临时修改：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umask 002 &amp;&amp; touch file.txt</span><br></pre></td></tr></table></figure>
创建 <code>file.txt</code> 为 <code>664</code>（<code>rw-rw-r--</code>）。<br>
<strong>注意</strong>：</li>
<li><code>umask</code> 仅影响新文件/目录，不修改现有文件。</li>
<li>系统默认 <code>umask</code> 通常为 <code>022</code>（普通用户）或 <code>002</code>（共享环境）。</li>
<li>检查 <code>/etc/login.defs</code> 或 <code>/etc/profile</code> 中的全局 <code>umask</code> 设置。</li>
</ul>
<h5 id="2.6-sudo%EF%BC%88%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3%EF%BC%89" tabindex="-1">2.6 sudo（与权限管理相关）</h5>
<p><strong>功能</strong>：以其他用户（通常 root）身份执行命令，间接管理权限敏感操作。<br>
<strong>语法</strong>（参考前文提供的 <code>sudo_manual.txt</code> 翻译）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo [选项] 命令</span><br></pre></td></tr></table></figure>
<p><strong>与权限管理相关选项</strong>：</p>
<ul>
<li><code>-u 用户</code>：以指定用户身份运行命令。</li>
<li><code>-g 组</code>：以指定组身份运行命令。</li>
<li><code>-e</code>（sudoedit）：编辑文件，保留调用者环境。<br>
<strong>场景</strong>：</li>
<li>修改系统文件（如 <code>/etc/fstab</code>）的权限。</li>
<li>更改受限文件的所有者或组。<br>
<strong>示例</strong>：</li>
<li><code>sudo chmod 600 /etc/shadow</code>：设置影子文件仅 root 可读写。</li>
<li><code>sudo chown root:root /etc/passwd</code>：确保密码文件由 root 拥有。</li>
<li><code>sudo -u user1 touch /home/user1/file.txt</code>：以 <code>user1</code> 身份创建文件。<br>
<strong>高级用法</strong>：</li>
<li>编辑受限文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudoedit /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
使用用户编辑器编辑配置文件。</li>
<li>结合 <code>chown</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u user1 chown user1:group1 /home/user1/data</span><br></pre></td></tr></table></figure>
以 <code>user1</code> 身份更改文件所有者。<br>
<strong>注意</strong>：</li>
<li><code>sudo</code> 需要在 <code>/etc/sudoers</code> 中配置权限，建议用 <code>visudo</code> 编辑。</li>
<li>滥用 <code>sudo</code> 可能导致安全风险，需谨慎配置。</li>
</ul>
<h4 id="3.-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%A4%BA%E4%BE%8B" tabindex="-1">3. 使用场景与示例</h4>
<p>以下是权限管理命令在实际任务中的应用：</p>
<ol>
<li>
<p><strong>保护敏感文件</strong>：</p>
<ul>
<li>设置私钥文件仅所有者可读：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 ~/.ssh/id_rsa</span><br><span class="line">chown user1 ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>
</li>
<li>确保只有 root 访问影子文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 600 /etc/shadow</span><br><span class="line">sudo chown root:shadow /etc/shadow</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>配置共享目录</strong>：</p>
<ul>
<li>创建团队共享目录，组内可读写：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /shared</span><br><span class="line">sudo chown :developers /shared</span><br><span class="line">sudo chmod 770 /shared</span><br><span class="line">sudo chmod g+s /shared</span><br></pre></td></tr></table></figure>
新文件继承 <code>developers</code> 组。</li>
</ul>
</li>
<li>
<p><strong>细粒度权限控制</strong>：</p>
<ul>
<li>允许特定用户访问目录：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo setfacl -m u:user1:rwx /data</span><br><span class="line">getfacl /data</span><br></pre></td></tr></table></figure>
</li>
<li>设置目录默认 ACL：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo setfacl -d -m g:staff:rwx /shared</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>修复权限错误</strong>：</p>
<ul>
<li>批量恢复 <code>/var/log</code> 权限：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo find /var/log -type f -exec chmod 644 &#123;&#125; \;</span><br><span class="line">sudo find /var/log -type d -exec chmod 755 &#123;&#125; \;</span><br><span class="line">sudo chown -R root:adm /var/log</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>控制默认权限</strong>：</p>
<ul>
<li>设置用户默认创建文件为 <code>640</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;umask 027&quot; &gt;&gt; ~/.bashrc</span><br><span class="line">source ~/.bashrc</span><br><span class="line">touch newfile.txt  # 权限为 rw-r-----</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="4.-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" tabindex="-1">4. 高级用法</h4>
<ul>
<li>
<p><strong>自动化权限管理</strong>：</p>
<ul>
<li>使用脚本批量设置权限：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">find /data -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">chmod</span> 644 &#123;&#125; \;</span><br><span class="line">find /data -<span class="built_in">type</span> d -<span class="built_in">exec</span> <span class="built_in">chmod</span> 755 &#123;&#125; \;</span><br><span class="line"><span class="built_in">chown</span> -R user1:group1 /data</span><br></pre></td></tr></table></figure>
保存为 <code>set_permissions.sh</code>，运行 <code>bash set_permissions.sh</code>。</li>
</ul>
</li>
<li>
<p><strong>ACL 与标准权限结合</strong>：</p>
<ul>
<li>限制目录访问，但允许特定用户：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 /private</span><br><span class="line">setfacl -m u:user1:rwx /private</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>监控权限变化</strong>：</p>
<ul>
<li>使用 <code>inotifywait</code>（需安装 <code>inotify-tools</code>）监控权限变化：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install inotify-tools</span><br><span class="line">inotifywait -m /data -e attrib</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>结合 <code>sudoers</code> 限制权限操作</strong>：</p>
<ul>
<li>编辑 <code>/etc/sudoers</code> 限制用户只能运行特定权限命令：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user1 ALL=(ALL) /bin/chmod, /bin/chown</span><br></pre></td></tr></table></figure>
允许 <code>user1</code> 使用 <code>sudo chmod</code> 和 <code>sudo chown</code>。</li>
</ul>
</li>
</ul>
<h4 id="5.-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%89%A9%E5%B1%95" tabindex="-1">5. 注意事项与扩展</h4>
<ol>
<li><strong>权限安全</strong>：
<ul>
<li>避免为非必要文件设置 <code>setuid</code> 或 <code>setgid</code>，防止提权漏洞。</li>
<li>定期检查敏感文件权限（如 <code>/etc/shadow</code>、<code>~/.ssh/*</code>）。</li>
<li>使用 <code>ls -l</code> 或 <code>getfacl</code> 验证权限设置。</li>
</ul>
</li>
<li><strong>递归操作风险</strong>：
<ul>
<li><code>chmod -R</code>、<code>chown -R</code> 等需明确路径，避免影响系统文件。</li>
<li>测试前备份：<code>cp -r /dir /dir.bak</code>。</li>
</ul>
</li>
<li><strong>ACL 支持</strong>：
<ul>
<li>确保文件系统支持 ACL（检查 <code>/etc/fstab</code> 是否有 <code>acl</code> 选项）。</li>
<li>使用 <code>tune2fs -o acl /dev/sdX</code> 启用 ACL（需谨慎）。</li>
</ul>
</li>
<li><strong>学习资源</strong>：
<ul>
<li>查看手册：<code>man chmod</code>, <code>man chown</code>, <code>man setfacl</code>, <code>man umask</code>。</li>
<li>安装 <code>tldr</code>（<code>sudo apt install tldr</code>）获取简明示例。</li>
<li>在线教程：如 Ubuntu 社区文档或 DigitalOcean 的权限管理指南。</li>
</ul>
</li>
<li><strong>相关工具</strong>：
<ul>
<li><strong>lsattr</strong> / <strong>chattr</strong>：管理文件属性（如不可变文件）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chattr +i file.txt  # 设为不可修改</span><br><span class="line">lsattr file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><strong>getfacl</strong>：查看 ACL 信息。</li>
<li><strong>stat</strong>：查看文件元数据（包括权限、所有者）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat -c &quot;%A %U %G&quot; file.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="4.-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%EF%BC%88process-management%EF%BC%89" tabindex="-1">4. 进程管理（Process Management）</h2>
<p>进程管理是 Linux 系统中监控和控制运行程序（进程）的关键任务，涉及查看进程状态、调整优先级、终止进程、后台运行等操作。Ubuntu 的进程管理工具提供了从简单查看（如 <code>ps</code>）到复杂监控（如 <code>htop</code>）的功能，适合系统管理员、开发者和普通用户。以下按功能分类讲解相关命令。</p>
<h4 id="1.-%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B%E4%B8%8E%E7%9B%91%E6%8E%A7" tabindex="-1">1. 进程查看与监控</h4>
<p>这些命令用于查看运行中的进程、资源使用情况和系统状态。</p>
<h5 id="1.1-ps%EF%BC%88process-status%EF%BC%89" tabindex="-1">1.1 ps（Process Status）</h5>
<p><strong>功能</strong>：显示当前系统进程的快照，列出进程 ID（PID）、用户、命令等信息。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-e</code> 或 <code>aux</code>：显示所有进程（包括其他用户的）。</li>
<li><code>-u 用户</code>：显示指定用户的进程。</li>
<li><code>-f</code>：显示完整格式（包括 PPID、启动时间等）。</li>
<li><code>-p PID</code>：显示指定 PID 的进程。</li>
<li><code>--forest</code>：以树状结构显示进程层次。</li>
<li><code>-o 字段</code>：自定义输出字段（如 <code>pid,comm,%cpu</code>）。<br>
<strong>场景</strong>：</li>
<li>检查特定进程是否运行。</li>
<li>查看进程的父子关系。</li>
<li>获取进程详细信息（如 CPU/内存使用）。<br>
<strong>示例</strong>：</li>
<li><code>ps aux</code>：列出所有进程，包含用户、PID、CPU/内存使用等。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">user1     1234  0.0  0.1 123456  7890 pts/0    S    12:00   0:01 bash</span><br></pre></td></tr></table></figure>
</li>
<li><code>ps -u user1</code>：显示 <code>user1</code> 用户的进程。</li>
<li><code>ps -ef --forest</code>：显示进程树，查看父子关系。</li>
<li><code>ps -p 1234 -o pid,comm</code>：显示 PID 为 1234 的进程名称。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>grep</code> 筛选：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep firefox</span><br></pre></td></tr></table></figure>
查找 Firefox 进程。</li>
<li>自定义输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,ppid,%cpu,comm --sort=-%cpu</span><br></pre></td></tr></table></figure>
按 CPU 使用率降序显示进程。<br>
<strong>注意</strong>：</li>
<li><code>ps aux</code> 是 BSD 风格，<code>ps -ef</code> 是 System V 风格，输出格式略有不同。</li>
<li>输出可能较多，建议结合 <code>less</code> 或 <code>grep</code> 过滤。</li>
</ul>
<h5 id="1.2-top" tabindex="-1">1.2 top</h5>
<p><strong>功能</strong>：实时显示系统进程状态，包括 CPU、内存使用、进程列表等。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-d 秒</code>：设置刷新间隔（默认 3 秒）。</li>
<li><code>-p PID</code>：仅监控指定 PID。</li>
<li><code>-u 用户</code>：显示指定用户的进程。<br>
<strong>交互键</strong>：</li>
<li><code>q</code>：退出。</li>
<li><code>k</code>：输入 PID 终止进程。</li>
<li><code>r</code>：输入 PID 修改进程优先级（nice 值）。</li>
<li><code>f</code>：进入字段管理，选择显示列。</li>
<li><code>P</code>：按 CPU 使用排序。</li>
<li><code>M</code>：按内存使用排序。<br>
<strong>场景</strong>：</li>
<li>实时监控系统负载和进程资源使用。</li>
<li>识别占用 CPU/内存过高的进程。<br>
<strong>示例</strong>：</li>
<li><code>top</code>：启动实时监控。</li>
<li><code>top -d 1</code>：每秒刷新进程状态。</li>
<li><code>top -u user1</code>：仅显示 <code>user1</code> 的进程。<br>
<strong>高级用法</strong>：</li>
<li>保存快照：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -b -n 1 &gt; top_output.txt</span><br></pre></td></tr></table></figure>
运行一次并保存输出（批处理模式）。</li>
<li>监控特定进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -p 1234</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>top</code> 是交互式工具，适合手动监控。</li>
<li>对于更现代化的界面，推荐使用 <code>htop</code>。</li>
</ul>
<h5 id="1.3-htop" tabindex="-1">1.3 htop</h5>
<p><strong>功能</strong>：增强版的 <code>top</code>，提供彩色界面、交互式操作和直观显示（需安装 <code>sudo apt install htop</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htop [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-d 秒</code>：设置刷新间隔。</li>
<li><code>-u 用户</code>：仅显示指定用户的进程。</li>
<li><code>-s 列</code>：按指定列排序（如 <code>CPU</code>、<code>MEM</code>）。<br>
<strong>交互键</strong>：</li>
<li><code>F2</code>：配置界面（调整显示列）。</li>
<li><code>F3</code> 或 <code>/</code>：搜索进程。</li>
<li><code>F5</code>：显示进程树。</li>
<li><code>F9</code>：终止进程（选择信号）。</li>
<li><code>F7/F8</code>：降低/提高进程优先级（nice 值）。</li>
<li><code>q</code>：退出。<br>
<strong>场景</strong>：</li>
<li>直观监控系统性能。</li>
<li>快速终止或调整进程优先级。<br>
<strong>示例</strong>：</li>
<li><code>htop</code>：启动交互界面。</li>
<li><code>htop -u user1</code>：显示 <code>user1</code> 的进程。</li>
<li><code>htop -s PERCENT_CPU</code>：按 CPU 使用率排序。<br>
<strong>高级用法</strong>：</li>
<li>筛选进程：
<ul>
<li>按 <code>F3</code> 输入关键字（如 “python”）过滤。</li>
</ul>
</li>
<li>批量操作：
<ul>
<li>使用 <code>F7</code>/<code>F8</code> 调整多个进程优先级。<br>
<strong>注意</strong>：</li>
</ul>
</li>
<li><code>htop</code> 需要安装，默认不包含在 Ubuntu 中。</li>
<li>比 <code>top</code> 更用户友好，支持鼠标操作。</li>
</ul>
<h5 id="1.4-pstree" tabindex="-1">1.4 pstree</h5>
<p><strong>功能</strong>：以树状结构显示进程层次关系，突出父子进程。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree [选项] [PID|用户]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-p</code>：显示 PID。</li>
<li><code>-u</code>：显示用户转换（当进程切换用户时）。</li>
<li><code>-a</code>：显示命令行参数。</li>
<li><code>-h</code>：高亮当前用户的进程。<br>
<strong>场景</strong>：</li>
<li>查看进程的父子关系（如服务进程的子进程）。</li>
<li>分析复杂进程结构。<br>
<strong>示例</strong>：</li>
<li><code>pstree</code>：显示所有进程树。</li>
<li><code>pstree -p user1</code>：显示 <code>user1</code> 的进程树，包含 PID。</li>
<li><code>pstree -a 1234</code>：显示 PID 为 1234 的进程及其子进程的命令行。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree -a | grep apache</span><br></pre></td></tr></table></figure>
查看 Apache 相关的进程树。<br>
<strong>注意</strong>：</li>
<li>输出可能较长，建议结合 <code>less</code> 查看。</li>
</ul>
<h4 id="2.-%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6" tabindex="-1">2. 进程控制</h4>
<p>这些命令用于控制进程的运行状态，如终止、暂停、调整优先级等。</p>
<h5 id="2.1-kill" tabindex="-1">2.1 kill</h5>
<p><strong>功能</strong>：向指定进程发送信号（默认 SIGTERM）以终止或控制其行为。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill [选项] PID...</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-信号</code>：指定信号编号或名称（如 <code>-9</code> 或 <code>-SIGKILL</code>）。</li>
<li><code>-l</code>：列出支持的信号。<br>
<strong>常用信号</strong>：</li>
<li><code>1</code>（SIGHUP）：重新加载配置（常用于服务）。</li>
<li><code>2</code>（SIGINT）：中断进程（类似 Ctrl+C）。</li>
<li><code>9</code>（SIGKILL）：强制终止（不可捕获）。</li>
<li><code>15</code>（SIGTERM）：优雅终止（默认）。<br>
<strong>场景</strong>：</li>
<li>终止无响应的进程。</li>
<li>重新加载服务配置。<br>
<strong>示例</strong>：</li>
<li><code>kill 1234</code>：向 PID 1234 发送 SIGTERM。</li>
<li><code>kill -9 1234</code>：强制终止 PID 1234。</li>
<li><code>kill -HUP 5678</code>：使 PID 5678 重新加载配置。</li>
<li><code>kill -l</code>：列出所有信号名称。<br>
<strong>高级用法</strong>：</li>
<li>批量终止：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill $(pgrep firefox)</span><br></pre></td></tr></table></figure>
终止所有 Firefox 进程。</li>
<li>结合 <code>ps</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep python | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill</span><br></pre></td></tr></table></figure>
终止所有 Python 进程。<br>
<strong>注意</strong>：</li>
<li><code>SIGKILL</code>（<code>-9</code>）不可捕获，可能导致数据丢失，优先使用 <code>SIGTERM</code>。</li>
<li>需确保 PID 正确，避免误杀系统进程。</li>
</ul>
<h5 id="2.2-killall" tabindex="-1">2.2 killall</h5>
<p><strong>功能</strong>：按进程名称（而非 PID）发送信号终止进程。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall [选项] 进程名</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-i</code>：交互式，逐个确认。</li>
<li><code>-u 用户</code>：终止指定用户的进程。</li>
<li><code>-s 信号</code>：指定信号（如 <code>-s SIGKILL</code>）。<br>
<strong>场景</strong>：</li>
<li>快速终止所有同名进程（如停止所有 <code>apache2</code> 实例）。</li>
<li>清理用户会话中的进程。<br>
<strong>示例</strong>：</li>
<li><code>killall firefox</code>：终止所有 Firefox 进程。</li>
<li><code>killall -u user1</code>：终止 <code>user1</code> 的所有进程。</li>
<li><code>killall -i python</code>：交互式终止 Python 进程。<br>
<strong>高级用法</strong>：</li>
<li>结合信号：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall -s SIGHUP nginx</span><br></pre></td></tr></table></figure>
重新加载 Nginx 配置。<br>
<strong>注意</strong>：</li>
<li>进程名需精确匹配，避免终止无关进程。</li>
<li>需要 <code>sudo</code> 终止非当前用户的进程。</li>
</ul>
<h5 id="2.3-pkill" tabindex="-1">2.3 pkill</h5>
<p><strong>功能</strong>：按进程名、用户或其他属性发送信号，类似 <code>killall</code> 但更灵活。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill [选项] 模式</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-u 用户</code>：匹配指定用户的进程。</li>
<li><code>-f</code>：匹配完整命令行（而非仅进程名）。</li>
<li><code>-signal</code>：指定信号（如 <code>-9</code>）。<br>
<strong>场景</strong>：</li>
<li>按模式终止进程（如正则匹配）。</li>
<li>清理特定用户的进程。<br>
<strong>示例</strong>：</li>
<li><code>pkill firefox</code>：终止所有 Firefox 进程。</li>
<li><code>pkill -u user1</code>：终止 <code>user1</code> 的所有进程。</li>
<li><code>pkill -f &quot;python script.py&quot;</code>：终止运行 <code>script.py</code> 的 Python 进程。<br>
<strong>高级用法</strong>：</li>
<li>按正则匹配：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -f &quot;.*python.*&quot;</span><br></pre></td></tr></table></figure>
终止所有包含 “python” 的进程。<br>
<strong>注意</strong>：</li>
<li><code>-f</code> 选项可能匹配过多，需谨慎使用。</li>
<li>建议先用 <code>pgrep</code> 验证匹配的进程。</li>
</ul>
<h5 id="2.4-pgrep" tabindex="-1">2.4 pgrep</h5>
<p><strong>功能</strong>：查找匹配进程名或其他属性的进程 PID。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pgrep [选项] 模式</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-u 用户</code>：匹配指定用户的进程。</li>
<li><code>-f</code>：匹配完整命令行。</li>
<li><code>-l</code>：显示 PID 和进程名。</li>
<li><code>-c</code>：输出匹配进程数量。<br>
<strong>场景</strong>：</li>
<li>获取进程 PID 供 <code>kill</code> 或其他命令使用。</li>
<li>检查特定进程是否运行。<br>
<strong>示例</strong>：</li>
<li><code>pgrep firefox</code>：输出所有 Firefox 进程的 PID。</li>
<li><code>pgrep -l python</code>：显示 Python 进程的 PID 和名称。</li>
<li><code>pgrep -u user1</code>：列出 <code>user1</code> 的进程 PID。</li>
<li><code>pgrep -c apache2</code>：统计 Apache2 进程数量。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>kill</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pgrep nginx | xargs kill -HUP</span><br></pre></td></tr></table></figure>
重新加载所有 Nginx 进程。<br>
<strong>注意</strong>：</li>
<li>模式是正则表达式，需避免匹配无关进程。</li>
<li>使用 <code>-f</code> 时需精确匹配命令行。</li>
</ul>
<h4 id="3.-%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7%E4%B8%8E%E8%B0%83%E5%BA%A6" tabindex="-1">3. 进程优先级与调度</h4>
<p>这些命令用于调整进程的优先级和调度行为。</p>
<h5 id="3.1-nice" tabindex="-1">3.1 nice</h5>
<p><strong>功能</strong>：设置新启动进程的优先级（nice 值，范围 -20 到 19，值越大优先级越低）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nice [选项] 命令</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-n 值</code>：设置 nice 值（默认 +10）。<br>
<strong>场景</strong>：</li>
<li>降低后台任务的优先级，减少对系统的干扰。</li>
<li>为关键任务设置高优先级。<br>
<strong>示例</strong>：</li>
<li><code>nice -n 10 backup.sh</code>：以 nice 值 10 运行备份脚本。</li>
<li><code>nice -n -5 critical_task</code>：以高优先级（-5）运行任务（需 <code>sudo</code>）。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>sudo</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nice -n -10 service start</span><br></pre></td></tr></table></figure>
以高优先级启动服务。<br>
<strong>注意</strong>：</li>
<li>普通用户只能增加 nice 值（降低优先级），降低 nice 值需 <code>sudo</code>。</li>
<li>nice 值影响 CPU 调度，非实时优先级。</li>
</ul>
<h5 id="3.2-renice" tabindex="-1">3.2 renice</h5>
<p><strong>功能</strong>：修改运行中进程的 nice 值。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renice 值 -p PID</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-p PID</code>：指定进程 PID。</li>
<li><code>-u 用户</code>：修改指定用户的所有进程。</li>
<li><code>-g 组</code>：修改指定组的进程。<br>
<strong>场景</strong>：</li>
<li>调整正在运行的进程优先级。</li>
<li>优化系统资源分配。<br>
<strong>示例</strong>：</li>
<li><code>renice 10 -p 1234</code>：将 PID 1234 的 nice 值设为 10。</li>
<li><code>sudo renice -5 -u user1</code>：将 <code>user1</code> 的所有进程优先级设为 -5。<br>
<strong>高级用法</strong>：</li>
<li>批量调整：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renice 15 -p $(pgrep python)</span><br></pre></td></tr></table></figure>
降低所有 Python 进程的优先级。<br>
<strong>注意</strong>：</li>
<li>降低 nice 值（提高优先级）需 <code>sudo</code>。</li>
<li>调整优先级对 I/O 密集型任务影响有限。</li>
</ul>
<h4 id="4.-%E5%90%8E%E5%8F%B0%E4%B8%8E%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6" tabindex="-1">4. 后台与作业控制</h4>
<p>这些命令用于管理前台/后台进程和 shell 作业。</p>
<h5 id="4.1-bg" tabindex="-1">4.1 bg</h5>
<p><strong>功能</strong>：将暂停的作业移到后台运行。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bg [作业ID]</span><br></pre></td></tr></table></figure>
<p><strong>场景</strong>：</p>
<ul>
<li>恢复暂停的进程（如 Ctrl+Z 暂停的程序）。</li>
<li>在终端运行长时间任务。<br>
<strong>示例</strong>：</li>
<li>运行脚本并暂停：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sleep 1000</span><br><span class="line"># 按 Ctrl+Z 暂停</span><br><span class="line">bg</span><br></pre></td></tr></table></figure>
将 <code>sleep</code> 移到后台运行。</li>
<li>指定作业：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bg %1</span><br></pre></td></tr></table></figure>
恢复作业 ID 为 1 的进程。<br>
<strong>高级用法</strong>：</li>
<li>查看作业：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jobs</span><br></pre></td></tr></table></figure>
显示当前 shell 的作业列表。<br>
<strong>注意</strong>：</li>
<li>作业 ID 通过 <code>jobs</code> 查看。</li>
<li>后台进程断开终端后可能终止（除非使用 <code>nohup</code> 或 <code>disown</code>）。</li>
</ul>
<h5 id="4.2-fg" tabindex="-1">4.2 fg</h5>
<p><strong>功能</strong>：将后台或暂停的作业移到前台运行。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fg [作业ID]</span><br></pre></td></tr></table></figure>
<p><strong>场景</strong>：</p>
<ul>
<li>恢复后台进程以交互。</li>
<li>继续暂停的任务。<br>
<strong>示例</strong>：</li>
<li><code>fg %1</code>：将作业 ID 1 移到前台。</li>
<li>暂停后恢复：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sleep 1000</span><br><span class="line"># 按 Ctrl+Z</span><br><span class="line">fg</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>结合 <code>jobs</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobs</span><br><span class="line">fg %2</span><br></pre></td></tr></table></figure>
查看并恢复特定作业。<br>
<strong>注意</strong>：</li>
<li>前台进程会占用终端，直到完成或再次暂停。</li>
</ul>
<h5 id="4.3-nohup" tabindex="-1">4.3 nohup</h5>
<p><strong>功能</strong>：使进程在终端断开后继续运行，忽略挂起信号（SIGHUP）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup 命令 [参数] &amp;</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li>输出默认写入 <code>nohup.out</code>。<br>
<strong>场景</strong>：</li>
<li>运行长时间任务（如备份、编译），即使终端关闭。</li>
<li>远程 SSH 会话中保持进程运行。<br>
<strong>示例</strong>：</li>
<li><code>nohup python script.py &amp;</code>：后台运行 Python 脚本，输出到 <code>nohup.out</code>。</li>
<li><code>nohup backup.sh &gt; backup.log 2&gt;&amp;1 &amp;</code>：重定向输出到 <code>backup.log</code>。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>nice</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup nice -n 10 long_task.sh &amp;</span><br></pre></td></tr></table></figure>
以低优先级运行后台任务。<br>
<strong>注意</strong>：</li>
<li>进程仍在后台运行，需用 <code>ps</code> 或 <code>jobs</code> 检查。</li>
<li>建议重定向输出，避免 <code>nohup.out</code> 过大。</li>
</ul>
<h5 id="4.4-disown" tabindex="-1">4.4 disown</h5>
<p><strong>功能</strong>：从当前 shell 的作业表中移除进程，使其不受终端关闭影响。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disown [选项] [作业ID]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-h</code>：保持作业接收 SIGHUP。</li>
<li><code>-a</code>：移除所有作业。<br>
<strong>场景</strong>：</li>
<li>防止后台进程因终端关闭而终止。</li>
<li>清理 shell 作业表。<br>
<strong>示例</strong>：</li>
<li><code>sleep 1000 &amp;</code> 后：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disown %1</span><br></pre></td></tr></table></figure>
移除作业 ID 1，终端关闭后继续运行。</li>
<li><code>disown -a</code>：移除所有后台作业。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>nohup</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup sleep 1000 &amp; disown</span><br></pre></td></tr></table></figure>
确保进程完全独立。<br>
<strong>注意</strong>：</li>
<li><code>disown</code> 不重定向输出，建议结合 <code>&gt; file</code>。</li>
</ul>
<h4 id="5.-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%A4%BA%E4%BE%8B" tabindex="-1">5. 使用场景与示例</h4>
<p>以下是进程管理命令在实际任务中的应用：</p>
<ol>
<li>
<p><strong>监控高负载进程</strong>：</p>
<ul>
<li>查找占用 CPU 最高的进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line"># 按 P 排序，或：</span><br><span class="line">ps -eo pid,comm,%cpu --sort=-%cpu | head</span><br></pre></td></tr></table></figure>
</li>
<li>使用 <code>htop</code> 筛选：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htop -s PERCENT_CPU</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>终止无响应进程</strong>：</p>
<ul>
<li>查找并终止 Firefox：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pgrep firefox</span><br><span class="line">killall firefox</span><br></pre></td></tr></table></figure>
</li>
<li>强制终止：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -9 -f firefox</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>管理后台任务</strong>：</p>
<ul>
<li>运行长时间备份：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup tar -czf backup.tar.gz /data &gt; backup.log 2&gt;&amp;1 &amp;</span><br><span class="line">disown</span><br></pre></td></tr></table></figure>
</li>
<li>检查后台进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jobs</span><br><span class="line">ps aux | grep tar</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>调整进程优先级</strong>：</p>
<ul>
<li>降低编译任务优先级：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nice -n 15 make</span><br></pre></td></tr></table></figure>
</li>
<li>提高数据库进程优先级：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo renice -10 -p $(pgrep mysqld)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>分析进程树</strong>：</p>
<ul>
<li>查看 Nginx 进程结构：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pstree -a -p nginx</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="6.-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" tabindex="-1">6. 高级用法</h4>
<ul>
<li>
<p><strong>自动化进程管理</strong>：</p>
<ul>
<li>脚本监控进程并重启：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> ! pgrep -f <span class="string">&quot;myapp&quot;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">nohup</span> /path/to/myapp &amp;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Restarted myapp&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
保存为 <code>monitor.sh</code>，用 <code>crontab</code> 定时运行。</li>
</ul>
</li>
<li>
<p><strong>实时监控</strong>：</p>
<ul>
<li>使用 <code>watch</code> 动态查看：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 &#x27;ps -eo pid,comm,%cpu --sort=-%cpu | head -5&#x27;</span><br></pre></td></tr></table></figure>
每秒显示 CPU 使用最高的 5 个进程。</li>
</ul>
</li>
<li>
<p><strong>进程信号处理</strong>：</p>
<ul>
<li>优雅重启服务：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -HUP $(pgrep nginx)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>结合 <code>systemd</code></strong>：</p>
<ul>
<li>管理服务进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart apache2</span><br><span class="line">systemctl status apache2</span><br></pre></td></tr></table></figure>
查看服务状态和日志。</li>
</ul>
</li>
</ul>
<h4 id="7.-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%89%A9%E5%B1%95" tabindex="-1">7. 注意事项与扩展</h4>
<ol>
<li><strong>安全提示</strong>：
<ul>
<li>避免随意使用 <code>kill -9</code>，可能导致数据丢失或系统不稳定。</li>
<li>终止系统进程（如 <code>init</code> 或 <code>systemd</code>）需谨慎。</li>
<li>修改优先级或终止其他用户进程需 <code>sudo</code>。</li>
</ul>
</li>
<li><strong>性能优化</strong>：
<ul>
<li>大量进程时，使用 <code>pgrep</code> 或 <code>htop</code> 替代 <code>ps aux | grep</code>。</li>
<li>实时监控大文件日志可能影响性能，建议用 <code>tail -f</code> 结合 <code>grep</code>。</li>
</ul>
</li>
<li><strong>相关工具</strong>：
<ul>
<li><strong>systemctl</strong>：管理 systemd 服务进程。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop nginx</span><br></pre></td></tr></table></figure>
</li>
<li><strong>lsof</strong>：查看进程打开的文件。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -p 1234</span><br></pre></td></tr></table></figure>
</li>
<li><strong>strace</strong>：跟踪进程系统调用。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strace -p 1234</span><br></pre></td></tr></table></figure>
</li>
<li><strong>pidstat</strong>（需安装 <code>sysstat</code>）：监控进程资源使用。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pidstat -p 1234 1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><strong>学习资源</strong>：
<ul>
<li>查看手册：<code>man ps</code>, <code>man kill</code>, <code>man htop</code>。</li>
<li>安装 <code>tldr</code>（<code>sudo apt install tldr</code>）获取简明示例。</li>
<li>在线教程：如 Ubuntu 社区文档或 DigitalOcean 的进程管理指南。</li>
</ul>
</li>
<li><strong>高级替代工具</strong>：
<ul>
<li><strong>btop</strong>：更现代化的 <code>htop</code> 替代（需安装）。</li>
<li><strong>glances</strong>：系统监控工具，包含进程管理。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install glances</span><br><span class="line">glances</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="5.-%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E5%92%8C%E7%9B%91%E6%8E%A7%EF%BC%88system-information%EF%BC%89" tabindex="-1">5. 系统信息和监控（System Information）</h2>
<p>系统信息和监控是 Ubuntu/Linux 系统中用于了解系统状态、硬件配置、资源使用和性能瓶颈的关键任务。这些命令帮助管理员和用户诊断问题、优化性能并确保系统稳定。以下按功能分类讲解相关命令，涵盖硬件信息、系统状态、资源监控和日志分析。</p>
<h4 id="1.-%E7%B3%BB%E7%BB%9F%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF" tabindex="-1">1. 系统硬件信息</h4>
<p>这些命令用于查看 CPU、内存、磁盘、设备等硬件信息。</p>
<h5 id="1.1-lscpu" tabindex="-1">1.1 lscpu</h5>
<p><strong>功能</strong>：显示 CPU 架构和详细信息，如核心数、频率、架构等。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-p</code>：以机器可读格式输出（适合脚本）。</li>
<li><code>-e</code>：显示扩展信息（如每核状态）。</li>
<li><code>-c</code>：仅显示在线 CPU。<br>
<strong>场景</strong>：</li>
<li>检查 CPU 核心数和虚拟化支持。</li>
<li>分析多核系统性能。<br>
<strong>示例</strong>：</li>
<li><code>lscpu</code>：显示 CPU 详细信息。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Architecture:        x86_64</span><br><span class="line">CPU(s):              8</span><br><span class="line">Thread(s) per core:  2</span><br><span class="line">Core(s) per socket:  4</span><br><span class="line">Vendor ID:           GenuineIntel</span><br><span class="line">Model name:          Intel(R) Core(TM) i7-9700</span><br></pre></td></tr></table></figure>
</li>
<li><code>lscpu -p</code>：输出机器可读格式，适合脚本解析。</li>
<li><code>lscpu -e</code>：显示每核详细信息。<br>
<strong>高级用法</strong>：</li>
<li>检查虚拟化支持：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu | grep Virtualization</span><br></pre></td></tr></table></figure>
</li>
<li>统计 CPU 核心：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu | grep &quot;^CPU(s):&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>输出依赖于 <code>/proc/cpuinfo</code>，确保权限正常。</li>
<li>虚拟机中可能显示虚拟 CPU 而非物理 CPU。</li>
</ul>
<h5 id="1.2-lsmem" tabindex="-1">1.2 lsmem</h5>
<p><strong>功能</strong>：显示系统内存信息，包括总量、可用量和内存块状态。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmem [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-s</code>：以人类可读格式显示（如 MB、GB）。</li>
<li><code>-a</code>：显示所有内存块（包括离线）。<br>
<strong>场景</strong>：</li>
<li>检查内存分配和 NUMA 架构。</li>
<li>诊断内存不足问题。<br>
<strong>示例</strong>：</li>
<li><code>lsmem</code>：显示内存状态。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RANGE                                 SIZE  STATE REMOVABLE  BLOCK</span><br><span class="line">0x0000000000000000-0x00000000ffffffff  4G online       yes   0-31</span><br><span class="line">Total online memory:  4G</span><br></pre></td></tr></table></figure>
</li>
<li><code>lsmem -s</code>：以 GB 显示内存信息。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>free</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmem | grep &quot;Total online&quot; &amp;&amp; free -h</span><br></pre></td></tr></table></figure>
对比内存总量和使用情况。<br>
<strong>注意</strong>：</li>
<li>需要 <code>util-linux</code> 包支持（默认安装）。</li>
<li>NUMA 系统可能显示复杂内存分布。</li>
</ul>
<h5 id="1.3-lsblk" tabindex="-1">1.3 lsblk</h5>
<p><strong>功能</strong>：列出块设备（如硬盘、SSD、USB）及其分区信息。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-a</code>：显示所有设备（包括空设备）。</li>
<li><code>-f</code>：显示文件系统类型（如 ext4、ntfs）。</li>
<li><code>-o 字段</code>：自定义输出（如 <code>NAME,SIZE,FSTYPE</code>）。</li>
<li><code>-p</code>：显示完整设备路径（如 <code>/dev/sda</code>）。<br>
<strong>场景</strong>：</li>
<li>检查磁盘分区和挂载点。</li>
<li>识别新插入的存储设备。<br>
<strong>示例</strong>：</li>
<li><code>lsblk</code>：列出所有块设备。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0  500G  0 disk</span><br><span class="line">├─sda1   8:1    0  100G  0 part /boot</span><br><span class="line">└─sda2   8:2    0  400G  0 part /</span><br></pre></td></tr></table></figure>
</li>
<li><code>lsblk -f</code>：显示文件系统和挂载点。</li>
<li><code>lsblk -o NAME,SIZE,TYPE</code>：仅显示设备名、大小和类型。<br>
<strong>高级用法</strong>：</li>
<li>筛选未挂载分区：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -f | grep -v &quot;[SWAP]\|/&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>检查 USB 设备：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -p | grep /dev/sd[b-z]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 查看某些受限设备。</li>
<li>配合 <code>fdisk</code> 或 <code>parted</code> 管理分区。</li>
</ul>
<h5 id="1.4-lshw" tabindex="-1">1.4 lshw</h5>
<p><strong>功能</strong>：列出系统硬件详细信息，包括 CPU、内存、磁盘、网络等（需安装 <code>sudo apt install lshw</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lshw [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-C 类</code>：显示特定硬件类别（如 <code>cpu</code>、<code>memory</code>、<code>disk</code>）。</li>
<li><code>-short</code>：简洁输出。</li>
<li><code>-html</code>：输出 HTML 格式。<br>
<strong>场景</strong>：</li>
<li>收集硬件清单（如服务器审计）。</li>
<li>诊断硬件兼容性问题。<br>
<strong>示例</strong>：</li>
<li><code>sudo lshw</code>：显示完整硬件信息。</li>
<li><code>sudo lshw -C cpu</code>：显示 CPU 详情。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*-cpu</span><br><span class="line">     description: CPU</span><br><span class="line">     product: Intel(R) Core(TM) i7-9700</span><br><span class="line">     vendor: Intel Corp.</span><br><span class="line">     physical id: 4</span><br><span class="line">     bus info: cpu@0</span><br><span class="line">     size: 3600MHz</span><br><span class="line">     capacity: 4600MHz</span><br></pre></td></tr></table></figure>
</li>
<li><code>sudo lshw -short</code>：简洁硬件概览。<br>
<strong>高级用法</strong>：</li>
<li>输出到文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lshw -html &gt; hardware.html</span><br></pre></td></tr></table></figure>
</li>
<li>筛选网络设备：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lshw -C network</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 获取完整信息。</li>
<li>输出较详细，建议结合 <code>grep</code> 或 <code>less</code>。</li>
</ul>
<h5 id="1.5-dmidecode" tabindex="-1">1.5 dmidecode</h5>
<p><strong>功能</strong>：读取 DMI/SMBIOS 信息，显示硬件细节（如 BIOS、主板、内存）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmidecode [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-t 类型</code>：指定类型（如 <code>bios</code>、<code>memory</code>、<code>processor</code>）。</li>
<li><code>-s 关键字</code>：提取特定字段（如 <code>bios-version</code>）。<br>
<strong>场景</strong>：</li>
<li>检查 BIOS 版本或硬件序列号。</li>
<li>验证服务器硬件规格。<br>
<strong>示例</strong>：</li>
<li><code>sudo dmidecode -t processor</code>：显示 CPU 信息。</li>
<li><code>sudo dmidecode -s bios-version</code>：显示 BIOS 版本。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.2.3</span><br></pre></td></tr></table></figure>
</li>
<li><code>sudo dmidecode -t memory</code>：显示内存条信息。<br>
<strong>高级用法</strong>：</li>
<li>提取主板信息：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dmidecode -t baseboard</span><br></pre></td></tr></table></figure>
</li>
<li>结合脚本：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dmidecode -s system-serial-number &gt; serial.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 访问硬件信息。</li>
<li>某些虚拟机可能无法获取完整 DMI 数据。</li>
</ul>
<h4 id="2.-%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7" tabindex="-1">2. 系统资源监控</h4>
<p>这些命令用于监控 CPU、内存、磁盘和网络的实时使用情况。</p>
<h5 id="2.1-free" tabindex="-1">2.1 free</h5>
<p><strong>功能</strong>：显示系统内存和交换空间的使用情况。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-h</code>：人类可读格式（如 GB、MB）。</li>
<li><code>-s 秒</code>：每隔几秒刷新。</li>
<li><code>-m</code>：以 MB 显示。</li>
<li><code>-t</code>：显示总计行。<br>
<strong>场景</strong>：</li>
<li>检查可用内存。</li>
<li>诊断内存泄漏或高负载。<br>
<strong>示例</strong>：</li>
<li><code>free -h</code>：显示内存使用情况。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">     total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:   7.8Gi       2.5Gi       3.2Gi       0.1Gi       2.0Gi       5.0Gi</span><br><span class="line">Swap:  2.0Gi       0.0Gi       2.0Gi</span><br></pre></td></tr></table></figure>
</li>
<li><code>free -s 2</code>：每 2 秒刷新内存状态。</li>
<li><code>free -mt</code>：以 MB 显示并包含总计。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>watch</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 free -h</span><br></pre></td></tr></table></figure>
每秒刷新内存状态。</li>
<li>检查低内存：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -h | grep Mem | awk &#x27;&#123;print $7&#125;&#x27;  # 输出 available 内存</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>available</code> 比 <code>free</code> 更准确反映可用内存。</li>
<li>高 <code>buff/cache</code> 通常正常（Linux 缓存机制）。</li>
</ul>
<h5 id="2.2-vmstat" tabindex="-1">2.2 vmstat</h5>
<p><strong>功能</strong>：报告虚拟内存、进程、CPU 和 I/O 统计信息。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat [选项] [间隔 [次数]]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-s</code>：显示详细统计表。</li>
<li><code>-m</code>：显示内存 slab 信息。</li>
<li><code>-d</code>：显示磁盘统计。</li>
<li><code>-t</code>：添加时间戳。<br>
<strong>场景</strong>：</li>
<li>监控内存交换和 CPU 活动。</li>
<li>分析 I/O 瓶颈。<br>
<strong>示例</strong>：</li>
<li><code>vmstat 2</code>：每 2 秒刷新统计。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 1  0      0 3200000 200000 1800000   0    0     0     0  100  200 10  5 85  0  0</span><br></pre></td></tr></table></figure>
</li>
<li><code>vmstat -s</code>：显示内存统计表。</li>
<li><code>vmstat -d</code>：显示磁盘读写统计。<br>
<strong>高级用法</strong>：</li>
<li>监控 I/O 瓶颈：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat -t 1 | grep -v procs</span><br></pre></td></tr></table></figure>
每秒显示带时间戳的统计。<br>
<strong>注意</strong>：</li>
<li><code>si/so</code>（swap in/out）高表示内存压力，可能需增加 RAM。</li>
<li>需要结合其他工具（如 <code>iostat</code>）分析具体问题。</li>
</ul>
<h5 id="2.3-iostat" tabindex="-1">2.3 iostat</h5>
<p><strong>功能</strong>：报告 CPU 和 I/O（磁盘、网络）统计信息（需安装 <code>sudo apt install sysstat</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [选项] [间隔 [次数]]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-c</code>：仅显示 CPU 统计。</li>
<li><code>-d</code>：仅显示磁盘统计。</li>
<li><code>-x</code>：显示扩展统计（如设备利用率）。</li>
<li><code>-h</code>：人类可读格式。<br>
<strong>场景</strong>：</li>
<li>分析磁盘读写性能。</li>
<li>检查 CPU 负载分布。<br>
<strong>示例</strong>：</li>
<li><code>iostat</code>：显示 CPU 和磁盘概览。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">          10.00    0.00    5.00    0.10    0.00   84.90</span><br><span class="line">Device    tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">sda       5.00      100.00       50.00     100000      50000</span><br></pre></td></tr></table></figure>
</li>
<li><code>iostat -x 2</code>：每 2 秒显示扩展磁盘统计。</li>
<li><code>iostat -c</code>：仅显示 CPU 统计。<br>
<strong>高级用法</strong>：</li>
<li>监控特定设备：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x /dev/sda 1</span><br></pre></td></tr></table></figure>
</li>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x | grep sda</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sysstat</code> 包支持。</li>
<li>高 <code>%iowait</code> 表示磁盘 I/O 瓶颈。</li>
</ul>
<h5 id="2.4-top" tabindex="-1">2.4 top</h5>
<p><strong>功能</strong>：实时显示系统进程状态、CPU 和内存使用情况（已在进程管理中介绍，此处侧重系统监控）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-d 秒</code>：设置刷新间隔。</li>
<li><code>-b</code>：批处理模式（输出到文件）。</li>
<li><code>-n 次数</code>：运行指定次数后退出。<br>
<strong>场景</strong>：</li>
<li>实时监控系统负载。</li>
<li>识别高资源占用进程。<br>
<strong>示例</strong>：</li>
<li><code>top</code>：启动实时监控。</li>
<li><code>top -b -n 1 &gt; top_output.txt</code>：保存一次快照。<br>
<strong>高级用法</strong>：</li>
<li>筛选用户进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -u user1</span><br></pre></td></tr></table></figure>
</li>
<li>动态调整显示：
<ul>
<li>按 <code>f</code> 进入字段管理，添加 <code>%CPU</code> 或 <code>MEM</code> 列。<br>
<strong>注意</strong>：</li>
</ul>
</li>
<li>按 <code>1</code> 显示每个 CPU 核心的负载。</li>
<li>适合交互式监控，脚本中建议用 <code>vmstat</code> 或 <code>iostat</code>。</li>
</ul>
<h5 id="2.5-htop" tabindex="-1">2.5 htop</h5>
<p><strong>功能</strong>：增强版 <code>top</code>，提供彩色界面和交互式监控（需安装 <code>sudo apt install htop</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htop [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-d 秒</code>：设置刷新间隔。</li>
<li><code>-s 列</code>：按指定列排序（如 <code>CPU</code>、<code>MEM</code>）。<br>
<strong>场景</strong>：</li>
<li>直观查看系统资源使用。</li>
<li>快速调整进程优先级或终止进程。<br>
<strong>示例</strong>：</li>
<li><code>htop</code>：启动交互界面。</li>
<li><code>htop -s PERCENT_CPU</code>：按 CPU 使用率排序。<br>
<strong>高级用法</strong>：</li>
<li>过滤进程：
<ul>
<li>按 <code>F3</code> 输入关键字（如 “apache”）。</li>
</ul>
</li>
<li>导出数据：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htop --tree &gt; htop_output.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>比 <code>top</code> 更直观，支持鼠标操作。</li>
<li>建议安装以替换 <code>top</code>。</li>
</ul>
<h4 id="3.-%E7%A3%81%E7%9B%98%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7" tabindex="-1">3. 磁盘与文件系统监控</h4>
<p>这些命令用于检查磁盘使用量和文件系统状态。</p>
<h5 id="3.1-df" tabindex="-1">3.1 df</h5>
<p><strong>功能</strong>：显示文件系统的磁盘使用情况。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df [选项] [文件系统]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-h</code>：人类可读格式（如 GB、MB）。</li>
<li><code>-T</code>：显示文件系统类型（如 ext4）。</li>
<li><code>-i</code>：显示 inode 使用情况。</li>
<li><code>--output=字段</code>：自定义输出（如 <code>source,fstype,used,avail</code>）。<br>
<strong>场景</strong>：</li>
<li>检查磁盘剩余空间。</li>
<li>验证挂载点状态。<br>
<strong>示例</strong>：</li>
<li><code>df -h</code>：显示磁盘使用情况。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda2       400G  200G  180G  53% /</span><br><span class="line">/dev/sda1       100G   10G   90G  10% /boot</span><br></pre></td></tr></table></figure>
</li>
<li><code>df -T /home</code>：显示 <code>/home</code> 的文件系统类型。</li>
<li><code>df -i</code>：检查 inode 使用情况。<br>
<strong>高级用法</strong>：</li>
<li>筛选特定挂载点：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h --output=source,avail / | grep /dev</span><br></pre></td></tr></table></figure>
</li>
<li>监控磁盘满载：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 &#x27;df -h /&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>inode 耗尽可能导致无法创建新文件，即使磁盘有空间。</li>
<li>需 <code>sudo</code> 查看某些受限文件系统。</li>
</ul>
<h5 id="3.2-du" tabindex="-1">3.2 du</h5>
<p><strong>功能</strong>：计算目录或文件的磁盘使用量。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du [选项] [路径]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-h</code>：人类可读格式。</li>
<li><code>-s</code>：汇总目录总大小。</li>
<li><code>-c</code>：显示总计。</li>
<li><code>--max-depth=N</code>：限制目录深度。<br>
<strong>场景</strong>：</li>
<li>查找占用磁盘空间大的目录。</li>
<li>清理无用文件。<br>
<strong>示例</strong>：</li>
<li><code>du -sh /home/user</code>：显示用户家目录总大小。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.5G /home/user</span><br></pre></td></tr></table></figure>
</li>
<li><code>du -h --max-depth=1 /var</code>：显示 <code>/var</code> 下子目录大小。</li>
<li><code>du -hc *.log</code>：统计当前目录下 <code>.log</code> 文件的总大小。<br>
<strong>高级用法</strong>：</li>
<li>排序大文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h /var | sort -hr | head -n 10</span><br></pre></td></tr></table></figure>
显示 <code>/var</code> 下占用空间最大的 10 个目录。</li>
<li>结合 <code>find</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type d -exec du -sh &#123;&#125; \; | sort -hr</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>递归扫描可能较慢，建议指定路径。</li>
<li>需 <code>sudo</code> 访问受限目录。</li>
</ul>
<h4 id="4.-%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7" tabindex="-1">4. 网络监控</h4>
<p>这些 commands monitor network interfaces and traffic.</p>
<h5 id="4.1-ifconfig%EF%BC%88%E6%88%96-ip%EF%BC%89" tabindex="-1">4.1 ifconfig（或 ip）</h5>
<p><strong>功能</strong>：显示和配置网络接口信息（<code>ifconfig</code> 可能需安装 <code>sudo apt install net-tools</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig [接口]</span><br><span class="line">ip addr</span><br></pre></td></tr></table></figure>
<p><strong>常用选项（ifconfig）</strong>：</p>
<ul>
<li><code>-a</code>：显示所有接口（包括未激活的）。<br>
<strong>常用选项（ip）</strong>：</li>
<li><code>ip addr show</code>：显示网络接口。</li>
<li><code>ip -s link</code>：显示接口统计。<br>
<strong>场景</strong>：</li>
<li>检查网络接口的 IP 地址和状态。</li>
<li>诊断网络连接问题。<br>
<strong>示例</strong>：</li>
<li><code>ifconfig</code>：显示活动接口。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">      inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255</span><br></pre></td></tr></table></figure>
</li>
<li><code>ip addr</code>：显示所有接口信息。</li>
<li><code>ip -s link</code>：显示接口流量统计。<br>
<strong>高级用法</strong>：</li>
<li>筛选特定接口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show eth0</span><br></pre></td></tr></table></figure>
</li>
<li>监控流量：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 &#x27;ip -s link&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>ip</code> 是现代替代工具，<code>ifconfig</code> 可能在某些系统上不可用。</li>
<li>需要 <code>sudo</code> 配置接口。</li>
</ul>
<h5 id="4.2-netstat%EF%BC%88%E9%9C%80%E5%AE%89%E8%A3%85-sudo-apt-install-net-tools%EF%BC%89" tabindex="-1">4.2 netstat（需安装 <code>sudo apt install net-tools</code>）</h5>
<p><strong>功能</strong>：显示网络连接、路由表和接口统计。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-a</code>：显示所有连接（包括监听）。</li>
<li><code>-t</code>：显示 TCP 连接。</li>
<li><code>-u</code>：显示 UDP 连接。</li>
<li><code>-p</code>：显示关联进程。</li>
<li><code>-n</code>：显示数字地址（不解析 DNS）。<br>
<strong>场景</strong>：</li>
<li>检查开放端口和连接状态。</li>
<li>识别网络服务进程。<br>
<strong>示例</strong>：</li>
<li><code>netstat -tuln</code>：显示监听的 TCP/UDP 端口。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN</span><br></pre></td></tr></table></figure>
</li>
<li><code>netstat -ap</code>：显示连接和关联进程。<br>
<strong>高级用法</strong>：</li>
<li>筛选特定端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tuln | grep :80</span><br></pre></td></tr></table></figure>
</li>
<li>统计连接：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep ESTABLISHED | wc -l</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>netstat</code> 被 <code>ss</code> 替代，推荐使用 <code>ss</code>。</li>
<li>需要 <code>sudo</code> 查看某些连接。</li>
</ul>
<h5 id="4.3-ss" tabindex="-1">4.3 ss</h5>
<p><strong>功能</strong>：现代网络连接查看工具，替代 <code>netstat</code>，更高效。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-t</code>：显示 TCP 连接。</li>
<li><code>-u</code>：显示 UDP 连接。</li>
<li><code>-l</code>：显示监听端口。</li>
<li><code>-p</code>：显示关联进程。</li>
<li><code>-n</code>：不解析地址/端口。<br>
<strong>场景</strong>：</li>
<li>检查服务器开放端口。</li>
<li>监控网络连接状态。<br>
<strong>示例</strong>：</li>
<li><code>ss -tuln</code>：显示监听的 TCP/UDP 端口。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Netid  State      Recv-Q Send-Q  Local Address:Port   Peer Address:Port</span><br><span class="line">tcp    LISTEN     0      128     0.0.0.0:22           0.0.0.0:*</span><br></pre></td></tr></table></figure>
</li>
<li><code>ss -tp</code>：显示 TCP 连接和进程。<br>
<strong>高级用法</strong>：</li>
<li>筛选特定端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tuln | grep :80</span><br></pre></td></tr></table></figure>
</li>
<li>监控活跃连接：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 &#x27;ss -tn state established&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>比 <code>netstat</code> 更快，适合现代系统。</li>
<li>需要 <code>sudo</code> 查看详细进程信息。</li>
</ul>
<h4 id="5.-%E6%97%A5%E5%BF%97%E4%B8%8E%E7%B3%BB%E7%BB%9F%E4%BA%8B%E4%BB%B6%E7%9B%91%E6%8E%A7" tabindex="-1">5. 日志与系统事件监控</h4>
<p>这些命令用于查看系统日志和事件，诊断问题。</p>
<h5 id="5.1-journalctl" tabindex="-1">5.1 journalctl</h5>
<p><strong>功能</strong>：查看 systemd 日志，包含系统和服务日志。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-u 服务</code>：显示指定服务日志（如 <code>systemd-networkd</code>）。</li>
<li><code>-b</code>：显示当前启动的日志。</li>
<li><code>-f</code>：实时监控日志（类似 <code>tail -f</code>）。</li>
<li><code>-p 优先级</code>：过滤日志级别（如 <code>3</code> 表示错误）。</li>
<li><code>-n 行数</code>：显示最后指定行数。<br>
<strong>场景</strong>：</li>
<li>排查系统启动或服务错误。</li>
<li>实时监控系统事件。<br>
<strong>示例</strong>：</li>
<li><code>journalctl -b</code>：显示当前启动的日志。</li>
<li><code>journalctl -u sshd</code>：显示 SSH 服务日志。</li>
<li><code>journalctl -f</code>：实时监控系统日志。</li>
<li><code>journalctl -p 3</code>：显示错误级别日志。<br>
<strong>高级用法</strong>：</li>
<li>筛选时间范围：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl --since &quot;2025-09-14 14:00&quot; --until &quot;2025-09-14 15:00&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u apache2 | grep &quot;error&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 查看某些系统日志。</li>
<li>日志可能占用大量空间，定期清理（<code>sudo journalctl --vacuum-time=7d</code>）。</li>
</ul>
<h5 id="5.2-dmesg" tabindex="-1">5.2 dmesg</h5>
<p><strong>功能</strong>：显示内核环形缓冲区的日志，包含硬件和驱动信息。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-T</code>：显示人类可读时间。</li>
<li><code>-L</code>：彩色输出。</li>
<li><code>-w</code>：实时监控（类似 <code>tail -f</code>）。</li>
<li><code>-l 级别</code>：过滤日志级别（如 <code>err</code>、<code>warn</code>）。<br>
<strong>场景</strong>：</li>
<li>诊断硬件问题（如 USB 设备失败）。</li>
<li>检查内核启动消息。<br>
<strong>示例</strong>：</li>
<li><code>dmesg</code>：显示所有内核日志。</li>
<li><code>dmesg -T | grep usb</code>：显示 USB 相关日志，带时间戳。</li>
<li><code>dmesg -w</code>：实时监控内核日志。</li>
<li><code>dmesg -l err</code>：显示错误级别日志。<br>
<strong>高级用法</strong>：</li>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep -i &quot;error\|fail&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>导出日志：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg &gt; kernel.log</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 查看某些受限日志。</li>
<li>缓冲区有限，老日志可能被覆盖。</li>
</ul>
<h4 id="6.-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%A4%BA%E4%BE%8B" tabindex="-1">6. 使用场景与示例</h4>
<p>以下是系统信息和监控命令在实际任务中的应用：</p>
<ol>
<li>
<p><strong>检查系统硬件配置</strong>：</p>
<ul>
<li>获取 CPU 和内存信息：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu &amp;&amp; free -h</span><br></pre></td></tr></table></figure>
</li>
<li>收集完整硬件清单：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lshw -short &gt; hardware.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>监控系统性能</strong>：</p>
<ul>
<li>实时查看 CPU 和内存：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">htop</span><br><span class="line"># 或</span><br><span class="line">watch -n 1 &#x27;vmstat -t 1 2&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li>检查磁盘 I/O 瓶颈：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x 1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>诊断磁盘空间问题</strong>：</p>
<ul>
<li>检查磁盘使用：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure>
</li>
<li>查找大目录：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h /var | sort -hr | head -n 10</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>网络问题排查</strong>：</p>
<ul>
<li>检查开放端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tuln</span><br></pre></td></tr></table></figure>
</li>
<li>监控网络流量：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 &#x27;ip -s link&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>分析系统日志</strong>：</p>
<ul>
<li>查看最近错误：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -p 3 -b</span><br></pre></td></tr></table></figure>
</li>
<li>实时监控服务：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u nginx -f</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="7.-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" tabindex="-1">7. 高级用法</h4>
<ul>
<li>
<p><strong>自动化监控脚本</strong>：</p>
<ul>
<li>监控内存并报警：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">THRESHOLD=10</span><br><span class="line">AVAIL=$(free -m | grep Mem | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$AVAIL</span> -lt <span class="variable">$THRESHOLD</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Low memory: <span class="variable">$AVAIL</span> MB&quot;</span> | mail -s <span class="string">&quot;Memory Alert&quot;</span> admin@example.com</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
保存为 <code>monitor_memory.sh</code>，用 <code>crontab</code> 定时运行。</li>
</ul>
</li>
<li>
<p><strong>实时性能仪表板</strong>：</p>
<ul>
<li>使用 <code>glances</code>（需安装 <code>sudo apt install glances</code>）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glances</span><br></pre></td></tr></table></figure>
提供 CPU、内存、磁盘、网络的综合监控。</li>
</ul>
</li>
<li>
<p><strong>日志分析</strong>：</p>
<ul>
<li>提取特定时间段的错误：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl --since &quot;2025-09-14 14:00&quot; -p 3 | grep &quot;error&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>硬件故障检测</strong>：</p>
<ul>
<li>检查磁盘健康（需安装 <code>smartmontools</code>）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install smartmontools</span><br><span class="line">sudo smartctl -a /dev/sda</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="8.-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%89%A9%E5%B1%95" tabindex="-1">8. 注意事项与扩展</h4>
<ol>
<li><strong>安全提示</strong>：
<ul>
<li>查看系统信息（如 <code>lshw</code>、<code>dmidecode</code>）或日志（<code>journalctl</code>）通常需要 <code>sudo</code>。</li>
<li>定期清理日志（<code>sudo journalctl --vacuum-size=100M</code>）以释放空间。</li>
</ul>
</li>
<li><strong>性能优化</strong>：
<ul>
<li>监控大日志文件时，结合 <code>grep</code> 或 <code>tail</code> 减少输出。</li>
<li>使用 <code>watch</code> 或 <code>htop</code> 替代频繁运行 <code>top</code>。</li>
</ul>
</li>
<li><strong>相关工具</strong>：
<ul>
<li><strong>glances</strong>：综合系统监控工具。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install glances</span><br><span class="line">glances</span><br></pre></td></tr></table></figure>
</li>
<li><strong>nmon</strong>：性能监控工具（需安装）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nmon</span><br><span class="line">nmon</span><br></pre></td></tr></table></figure>
</li>
<li><strong>iotop</strong>：监控进程 I/O（需安装）。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install iotop</span><br><span class="line">sudo iotop</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="6.-%E5%8C%85%E7%AE%A1%E7%90%86%EF%BC%88package-management%EF%BC%89---ubuntu-%E4%B8%93%E5%B1%9E-apt" tabindex="-1">6. 包管理（Package Management） - Ubuntu 专属 APT</h2>
<p>以下是对 Ubuntu 中 <strong>包管理（Package Management）</strong> 工具 <strong>APT</strong>（Advanced Package Tool）的详细讲解，涵盖其功能、语法、常用命令、选项、实际使用场景、高级用法和示例。内容基于 Ubuntu 22.04/24.04 环境，参考了 Ubuntu 官方文档、man 页、DigitalOcean 和 ItsFOSS 等权威来源，确保全面、深入且易于理解。讲解采用清晰的列表格式，包含丰富细节，结合实际场景和注意事项，专注于 Ubuntu 的 APT 系统（包括 <code>apt</code>, <code>apt-get</code>, <code>apt-cache</code> 等工具）。当前时间为 2025 年 9 月 14 日下午 3:03（JST）。</p>
<hr>
<p><strong>APT</strong> 是 Ubuntu 的默认包管理工具，用于安装、更新、移除和管理软件包及其依赖。它通过与软件源（repositories）交互，从在线存储库或本地缓存获取 <code>.deb</code> 格式的软件包。APT 包括几个核心命令（如 <code>apt</code>, <code>apt-get</code>, <code>apt-cache</code>），其中 <code>apt</code> 是现代用户友好的前端，而 <code>apt-get</code> 和 <code>apt-cache</code> 提供更细粒度的控制。以下详细讲解 APT 的功能、命令和使用方法。</p>
<h4 id="1.-apt-%E6%A6%82%E8%BF%B0" tabindex="-1">1. APT 概述</h4>
<ul>
<li><strong>功能</strong>：
<ul>
<li>安装、更新、移除软件包。</li>
<li>管理依赖关系，自动解决冲突。</li>
<li>配置和更新软件源。</li>
<li>查询包信息和搜索软件。</li>
</ul>
</li>
<li><strong>核心组件</strong>：
<ul>
<li><strong>apt</strong>: 用户友好的前端，结合 <code>apt-get</code> 和 <code>apt-cache</code> 的常用功能，推荐日常使用。</li>
<li><strong>apt-get</strong>: 功能全面的底层工具，适合脚本和高级操作。</li>
<li><strong>apt-cache</strong>: 查询包信息和依赖。</li>
<li><strong>dpkg</strong>: 低级工具，直接操作 <code>.deb</code> 文件（通常由 APT 调用）。</li>
</ul>
</li>
<li><strong>软件源</strong>：
<ul>
<li>配置文件：<code>/etc/apt/sources.list</code> 和 <code>/etc/apt/sources.list.d/*.list</code>。</li>
<li>源类型：<code>main</code>（官方支持）、<code>universe</code>（社区维护）、<code>restricted</code>（专有驱动）、<code>multiverse</code>（非自由软件）。</li>
<li>典型源格式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://archive.ubuntu.com/ubuntu jammy main universe</span><br></pre></td></tr></table></figure>
<ul>
<li><code>deb</code>: 二进制包。</li>
<li><code>http://...</code>: 源 URL。</li>
<li><code>jammy</code>: 发行版代号（如 Ubuntu 22.04）。</li>
<li><code>main universe</code>: 组件。</li>
</ul>
</li>
</ul>
</li>
<li><strong>缓存</strong>：APT 将下载的包和元数据存储在 <code>/var/cache/apt</code> 和 <code>/var/lib/apt</code>。</li>
</ul>
<h4 id="2.-%E6%A0%B8%E5%BF%83%E5%91%BD%E4%BB%A4%E4%B8%8E%E8%AF%AD%E6%B3%95" tabindex="-1">2. 核心命令与语法</h4>
<h5 id="2.1-apt" tabindex="-1">2.1 apt</h5>
<p><strong>功能</strong>：用户友好的命令行工具，整合 <code>apt-get</code> 和 <code>apt-cache</code> 的常用功能，提供进度条和彩色输出。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt [选项] 命令 [包名...]</span><br></pre></td></tr></table></figure>
<p><strong>常用命令</strong>：</p>
<ul>
<li><code>update</code>: 更新软件源的包索引。</li>
<li><code>upgrade</code>: 升级所有已安装的包到最新版本。</li>
<li><code>full-upgrade</code>: 升级包，允许移除或安装新依赖（更激进）。</li>
<li><code>install 包名</code>: 安装指定包及其依赖。</li>
<li><code>remove 包名</code>: 删除包，保留配置文件。</li>
<li><code>purge 包名</code>: 删除包及其配置文件。</li>
<li><code>autoremove</code>: 移除不再需要的依赖包。</li>
<li><code>search 关键字</code>: 搜索包名或描述。</li>
<li><code>show 包名</code>: 显示包的详细信息。</li>
<li><code>list</code>: 列出包状态（如已安装、可升级）。<br>
<strong>常用选项</strong>：</li>
<li><code>-y</code>: 自动确认（适合脚本）。</li>
<li><code>-s</code>: 模拟操作，不实际执行。</li>
<li><code>--no-install-recommends</code>: 仅安装必要依赖。</li>
<li><code>--allow-downgrades</code>: 允许降级安装。<br>
<strong>场景</strong>：</li>
<li>日常软件安装和更新。</li>
<li>查询可用包或检查系统状态。<br>
<strong>示例</strong>：</li>
<li>更新包索引：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>
刷新 <code>/var/lib/apt/lists</code> 中的源数据。</li>
<li>升级所有包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>
更新已安装的包到最新版本。</li>
<li>安装软件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim</span><br></pre></td></tr></table></figure>
安装 Vim 编辑器及其依赖。</li>
<li>删除软件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove nginx</span><br></pre></td></tr></table></figure>
删除 Nginx，保留配置文件。</li>
<li>清理无用依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure>
</li>
<li>搜索包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt search python3</span><br></pre></td></tr></table></figure>
查找包含 “python3” 的包。</li>
<li>查看包信息：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt show htop</span><br></pre></td></tr></table></figure>
显示 <code>htop</code> 的版本、描述等。</li>
<li>列出可升级包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt list --upgradable</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>模拟安装：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -s nginx</span><br></pre></td></tr></table></figure>
显示安装过程但不执行。</li>
<li>安装特定版本：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3=3.10.6-1~22.04</span><br></pre></td></tr></table></figure>
</li>
<li>批量安装：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim htop curl -y</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>apt</code> 是用户交互工具，脚本中建议用 <code>apt-get</code>。</li>
<li>运行 <code>update</code> 前需确保网络连接和源配置正确。</li>
<li>需要 <code>sudo</code> 执行修改操作。</li>
</ul>
<h5 id="2.2-apt-get" tabindex="-1">2.2 apt-get</h5>
<p><strong>功能</strong>：功能全面的包管理工具，适合高级用户和脚本，提供比 <code>apt</code> 更细粒度的控制。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get [选项] 命令 [包名...]</span><br></pre></td></tr></table></figure>
<p><strong>常用命令</strong>（与 <code>apt</code> 重叠的部分略，重点补充独特功能）：</p>
<ul>
<li><code>dist-upgrade</code>: 升级系统，可能更改依赖结构（类似 <code>full-upgrade</code>）。</li>
<li><code>clean</code>: 清除已下载的包缓存（<code>/var/cache/apt/archives</code>）。</li>
<li><code>autoclean</code>: 清除过期的包缓存。</li>
<li><code>check</code>: 检查依赖是否完整。</li>
<li><code>source 包名</code>: 下载包的源代码。</li>
<li><code>build-dep 包名</code>: 安装包的编译依赖。<br>
<strong>常用选项</strong>：</li>
<li><code>-y</code>: 自动确认。</li>
<li><code>-q</code>: 安静模式，减少输出。</li>
<li><code>--reinstall</code>: 重新安装包。</li>
<li><code>--download-only</code>: 仅下载包不安装。<br>
<strong>场景</strong>：</li>
<li>系统升级或修复依赖。</li>
<li>清理缓存以释放磁盘空间。</li>
<li>开发者编译软件时获取源代码。<br>
<strong>示例</strong>：</li>
<li>清理缓存：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get clean</span><br></pre></td></tr></table></figure>
删除 <code>/var/cache/apt/archives</code> 中的包。</li>
<li>检查依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get check</span><br></pre></td></tr></table></figure>
验证系统依赖完整性。</li>
<li>下载源代码：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get source bash</span><br></pre></td></tr></table></figure>
下载 Bash 的源代码。</li>
<li>安装编译依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get build-dep nginx</span><br></pre></td></tr></table></figure>
</li>
<li>重新安装包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install --reinstall vim</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>下载但不安装：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install --download-only nginx</span><br></pre></td></tr></table></figure>
包保存在 <code>/var/cache/apt/archives</code>。</li>
<li>修复损坏依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -f</span><br></pre></td></tr></table></figure>
</li>
<li>系统大版本升级：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>dist-upgrade</code> 可能移除包，需谨慎。</li>
<li>确保 <code>/etc/apt/sources.list</code> 配置正确以避免错误。</li>
</ul>
<h5 id="2.3-apt-cache" tabindex="-1">2.3 apt-cache</h5>
<p><strong>功能</strong>：查询包信息、依赖和软件源数据，不执行安装或删除操作。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache [选项] 命令 [包名...]</span><br></pre></td></tr></table></figure>
<p><strong>常用命令</strong>：</p>
<ul>
<li><code>search 关键字</code>: 搜索包名或描述。</li>
<li><code>show 包名</code>: 显示包的详细信息。</li>
<li><code>depends 包名</code>: 显示包的依赖。</li>
<li><code>rdepends 包名</code>: 显示依赖此包的其他包。</li>
<li><code>pkgnames</code>: 列出所有可用包名。</li>
<li><code>policy 包名</code>: 显示包的版本和源优先级。<br>
<strong>常用选项</strong>：</li>
<li><code>-i</code>: 显示重要信息（如依赖）。</li>
<li><code>-p</code>: 显示所有版本的包。<br>
<strong>场景</strong>：</li>
<li>查询包的版本、依赖或来源。</li>
<li>排查依赖冲突。<br>
<strong>示例</strong>：</li>
<li>搜索包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search webserver</span><br></pre></td></tr></table></figure>
查找包含 “webserver” 的包。</li>
<li>查看包信息：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache show nginx</span><br></pre></td></tr></table></figure>
显示 Nginx 的版本、描述等。</li>
<li>检查依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache depends python3</span><br></pre></td></tr></table></figure>
</li>
<li>查看反向依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache rdepends apache2</span><br></pre></td></tr></table></figure>
</li>
<li>显示源优先级：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache policy vim</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim:</span><br><span class="line">  Installed: 2:8.2.3995-1ubuntu2</span><br><span class="line">  Candidate: 2:8.2.3995-1ubuntu2</span><br><span class="line">  Version table:</span><br><span class="line"> *** 2:8.2.3995-1ubuntu2 500</span><br><span class="line">      500 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>查找依赖链：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache depends --recurse python3</span><br></pre></td></tr></table></figure>
显示 Python3 的完整依赖树。</li>
<li>列出所有包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache pkgnames | grep python</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>apt-cache</code> 不修改系统，仅查询。</li>
<li>需要先运行 <code>apt update</code> 确保索引最新。</li>
</ul>
<h5 id="2.4-dpkg" tabindex="-1">2.4 dpkg</h5>
<p><strong>功能</strong>：低级包管理工具，直接操作 <code>.deb</code> 文件，处理安装、移除和查询。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg [选项] 动作 [包名|.deb 文件]</span><br></pre></td></tr></table></figure>
<p><strong>常用动作</strong>：</p>
<ul>
<li><code>-i 文件</code>: 安装 <code>.deb</code> 文件。</li>
<li><code>-r 包名</code>: 删除包，保留配置文件。</li>
<li><code>-P 包名</code>: 删除包及其配置文件。</li>
<li><code>-l [模式]</code>: 列出已安装包。</li>
<li><code>-S 文件</code>: 查找包含指定文件的包。</li>
<li><code>-s 包名</code>: 显示包状态。<br>
<strong>常用选项</strong>：</li>
<li><code>--force-all</code>: 强制执行（如忽略依赖错误）。</li>
<li><code>--configure -a</code>: 配置所有未配置的包。<br>
<strong>场景</strong>：</li>
<li>安装本地 <code>.deb</code> 文件。</li>
<li>修复 APT 无法解决的包问题。</li>
<li>查询已安装包。<br>
<strong>示例</strong>：</li>
<li>安装本地包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i package.deb</span><br></pre></td></tr></table></figure>
</li>
<li>列出已安装包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep nginx</span><br></pre></td></tr></table></figure>
</li>
<li>查找文件所属包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -S /usr/bin/vim</span><br></pre></td></tr></table></figure>
</li>
<li>删除包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -r nginx</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>修复依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i package.deb</span><br><span class="line">sudo apt-get install -f</span><br></pre></td></tr></table></figure>
安装 <code>.deb</code> 后修复依赖。</li>
<li>列出包文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -L nginx</span><br></pre></td></tr></table></figure>
显示 Nginx 安装的文件列表。<br>
<strong>注意</strong>：</li>
<li><code>dpkg</code> 不自动处理依赖，需配合 <code>apt-get install -f</code>。</li>
<li>手动安装可能导致冲突，建议优先使用 <code>apt</code>。</li>
</ul>
<h4 id="3.-%E8%BD%AF%E4%BB%B6%E6%BA%90%E7%AE%A1%E7%90%86" tabindex="-1">3. 软件源管理</h4>
<p>软件源决定了 APT 从哪里获取包，配置文件位于 <code>/etc/apt/sources.list</code> 和 <code>/etc/apt/sources.list.d/</code>。</p>
<h5 id="3.1-add-apt-repository" tabindex="-1">3.1 add-apt-repository</h5>
<p><strong>功能</strong>：添加或移除 APT 软件源（如 PPA，Personal Package Archive）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository [选项] 源</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-r</code>: 移除指定源。</li>
<li><code>-y</code>: 自动确认。</li>
<li><code>-s</code>: 添加源代码源。<br>
<strong>场景</strong>：</li>
<li>添加第三方软件源（如最新版软件）。</li>
<li>启用 Ubuntu 的 universe 或 multiverse 源。<br>
<strong>示例</strong>：</li>
<li>添加 PPA：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:deadsnakes/ppa</span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>
添加 Python 最新版本的 PPA。</li>
<li>启用 universe 源：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository universe</span><br></pre></td></tr></table></figure>
</li>
<li>移除源：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository -r ppa:deadsnakes/ppa</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>添加源代码：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository -s ppa:deadsnakes/ppa</span><br></pre></td></tr></table></figure>
</li>
<li>手动编辑源：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
添加如 <code>deb http://archive.ubuntu.com/ubuntu jammy universe</code>.<br>
<strong>注意</strong>：</li>
<li>添加第三方 PPA 需谨慎，可能影响系统稳定性。</li>
<li>每次修改源后需运行 <code>sudo apt update</code>。</li>
</ul>
<h5 id="3.2-apt-key%EF%BC%88%E6%88%96-gpg%EF%BC%89" tabindex="-1">3.2 apt-key（或 gpg）</h5>
<p><strong>功能</strong>：管理 APT 软件源的 GPG 密钥，确保包来源可信（Ubuntu 22.04 后推荐用 <code>/etc/apt/trusted.gpg.d</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-key [命令]</span><br></pre></td></tr></table></figure>
<p><strong>常用命令</strong>：</p>
<ul>
<li><code>add 文件</code>: 添加 GPG 密钥。</li>
<li><code>list</code>: 列出已导入的密钥。</li>
<li><code>del 密钥ID</code>: 删除指定密钥。<br>
<strong>场景</strong>：</li>
<li>验证第三方源的安全性。</li>
<li>修复源签名错误。<br>
<strong>示例</strong>：</li>
<li>添加 GPG 密钥：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://example.com/key.asc | sudo apt-key add -</span><br></pre></td></tr></table></figure>
</li>
<li>列出密钥：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-key list</span><br></pre></td></tr></table></figure>
</li>
<li>新方式（推荐）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://example.com/key.asc | sudo tee /etc/apt/trusted.gpg.d/example.asc</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>验证签名：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-key verify package.deb</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>apt-key</code> 在 Ubuntu 22.04 后已废弃，推荐使用 <code>gpg</code> 和 <code>/etc/apt/trusted.gpg.d</code>。</li>
<li>确保密钥来源可靠。</li>
</ul>
<h4 id="4.-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%A4%BA%E4%BE%8B" tabindex="-1">4. 使用场景与示例</h4>
<p>以下是 APT 在实际任务中的应用：</p>
<ol>
<li>
<p><strong>安装和更新软件</strong>：</p>
<ul>
<li>安装 Nginx 并更新：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install nginx</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>
</li>
<li>安装特定版本：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3=3.10.6-1~22.04</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>清理系统</strong>：</p>
<ul>
<li>清理缓存和无用依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get clean</span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure>
</li>
<li>删除孤立包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove --purge</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>添加第三方源</strong>：</p>
<ul>
<li>安装最新 Node.js：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:chris-lea/node.js</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install nodejs</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>修复依赖问题</strong>：</p>
<ul>
<li>修复损坏依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -f</span><br><span class="line">sudo dpkg --configure -a</span><br></pre></td></tr></table></figure>
</li>
<li>重新配置包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg-reconfigure nginx</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>查询和搜索</strong>：</p>
<ul>
<li>查找 Python 相关包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt search python3 | grep library</span><br></pre></td></tr></table></figure>
</li>
<li>检查包状态：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep vim</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="5.-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" tabindex="-1">5. 高级用法</h4>
<ul>
<li><strong>自动化脚本</strong>：
<ul>
<li>批量安装软件：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">PACKAGES=<span class="string">&quot;vim htop curl&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install -y <span class="variable">$PACKAGES</span></span><br></pre></td></tr></table></figure>
保存为 <code>install_tools.sh</code>，运行 <code>bash install_tools.sh</code>。</li>
</ul>
</li>
<li><strong>PPA 管理</strong>：
<ul>
<li>列出所有 PPA：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /etc/apt/sources.list.d/</span><br></pre></td></tr></table></figure>
</li>
<li>禁用 PPA：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /etc/apt/sources.list.d/ppa.list /etc/apt/sources.list.d/ppa.list.disabled</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><strong>缓存备份</strong>：
<ul>
<li>备份已下载包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -r /var/cache/apt/archives /backup/apt_cache</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><strong>离线安装</strong>：
<ul>
<li>下载包及其依赖：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install --download-only nginx</span><br></pre></td></tr></table></figure>
</li>
<li>复制到另一台机器：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /var/cache/apt/archives/*.deb /media/usb</span><br><span class="line">sudo dpkg -i /media/usb/*.deb</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="7.-%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4%EF%BC%88networking%EF%BC%89" tabindex="-1">7. 网络命令（Networking）</h2>
<h4 id="1.-%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86" tabindex="-1">1. 网络接口管理</h4>
<p>这些命令用于查看和配置网络接口（如以太网、Wi-Fi）。</p>
<h5 id="1.1-ip" tabindex="-1">1.1 ip</h5>
<p><strong>功能</strong>：现代网络配置工具，用于显示和管理系统网络接口、IP 地址、路由和邻居表，替代过时的 <code>ifconfig</code>。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [选项] 对象 &#123;命令 | help&#125;</span><br></pre></td></tr></table></figure>
<p><strong>常用对象</strong>：</p>
<ul>
<li><code>link</code>：管理网络接口状态。</li>
<li><code>addr</code>：管理 IP 地址。</li>
<li><code>route</code>：管理路由表。</li>
<li><code>neigh</code>：管理 ARP 表（邻居）。<br>
<strong>常用选项</strong>：</li>
<li><code>-s</code>：显示统计信息（如流量）。</li>
<li><code>-4</code> / <code>-6</code>：仅显示 IPv4/IPv6。</li>
<li><code>-c</code>：彩色输出。<br>
<strong>场景</strong>：</li>
<li>检查网络接口状态和 IP 地址。</li>
<li>配置临时 IP 或路由。</li>
<li>监控接口流量。<br>
<strong>示例</strong>：</li>
<li>查看所有接口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip link</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP</span><br><span class="line">    link/ether 00:16:3e:12:34:56 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>
</li>
<li>查看 IP 地址：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500</span><br><span class="line">    inet 192.168.1.100/24 brd 192.168.1.255 scope global eth0</span><br></pre></td></tr></table></figure>
</li>
<li>添加临时 IP：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip addr add 192.168.1.101/24 dev eth0</span><br></pre></td></tr></table></figure>
</li>
<li>查看路由表：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">default via 192.168.1.1 dev eth0</span><br><span class="line">192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
<li>查看接口统计：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -s link</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>启用/禁用接口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ip link set eth0 down</span><br><span class="line">sudo ip link set eth0 up</span><br></pre></td></tr></table></figure>
</li>
<li>添加静态路由：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route add 10.0.0.0/24 via 192.168.1.1</span><br></pre></td></tr></table></figure>
</li>
<li>清理 ARP 缓存：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip neigh flush dev eth0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>配置更改是临时的，重启后失效，需修改配置文件（如 <code>/etc/netplan/</code>）。</li>
<li>需要 <code>sudo</code> 执行修改操作。</li>
<li>推荐用 <code>ip</code> 替代 <code>ifconfig</code>，因为它是现代标准。</li>
</ul>
<h5 id="1.2-ifconfig" tabindex="-1">1.2 ifconfig</h5>
<p><strong>功能</strong>：传统工具，用于查看和配置网络接口（需安装 <code>sudo apt install net-tools</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig [接口] [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-a</code>：显示所有接口（包括未激活的）。</li>
<li><code>up</code> / <code>down</code>：启用/禁用接口。</li>
<li><code>地址</code>：设置 IP 地址。<br>
<strong>场景</strong>：</li>
<li>快速检查接口 IP 和状态。</li>
<li>兼容旧脚本或系统。<br>
<strong>示例</strong>：</li>
<li>查看所有接口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig -a</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">      inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255</span><br></pre></td></tr></table></figure>
</li>
<li>设置 IP 地址：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig eth0 192.168.1.101 netmask 255.255.255.0</span><br></pre></td></tr></table></figure>
</li>
<li>禁用接口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig eth0 down</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 | grep inet</span><br></pre></td></tr></table></figure>
提取 IP 地址。<br>
<strong>注意</strong>：</li>
<li><code>ifconfig</code> 已逐渐被 <code>ip</code> 取代，某些系统可能未预装 <code>net-tools</code>。</li>
<li>配置更改临时，需修改配置文件持久化。</li>
</ul>
<h5 id="1.3-nmcli%EF%BC%88networkmanager-cli%EF%BC%89" tabindex="-1">1.3 nmcli（NetworkManager CLI）</h5>
<p><strong>功能</strong>：管理 NetworkManager 配置的网络连接，适用于桌面和服务器环境（需安装 <code>network-manager</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli [选项] 对象 &#123;命令&#125;</span><br></pre></td></tr></table></figure>
<p><strong>常用对象</strong>：</p>
<ul>
<li><code>connection</code>（con）：管理连接配置。</li>
<li><code>device</code>（dev）：管理网络设备。</li>
<li><code>general</code>：显示 NetworkManager 状态。<br>
<strong>常用命令</strong>：</li>
<li><code>show</code>：显示状态或配置。</li>
<li><code>up</code> / <code>down</code>：启用/禁用连接。</li>
<li><code>add</code> / <code>modify</code>：添加/修改连接。<br>
<strong>场景</strong>：</li>
<li>配置 Wi-Fi 或有线连接。</li>
<li>管理 DHCP 或静态 IP。</li>
<li>自动化网络配置。<br>
<strong>示例</strong>：</li>
<li>查看连接状态：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME         UUID                                  TYPE      DEVICE</span><br><span class="line">Wired conn   123e4567-e89b-12d3-a456-426614174000  ethernet  eth0</span><br></pre></td></tr></table></figure>
</li>
<li>连接 Wi-Fi：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli device wifi connect SSID password PASSWORD</span><br></pre></td></tr></table></figure>
</li>
<li>设置静态 IP：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify &quot;Wired conn&quot; ipv4.addresses 192.168.1.100/24</span><br><span class="line">nmcli connection modify &quot;Wired conn&quot; ipv4.gateway 192.168.1.1</span><br><span class="line">nmcli connection modify &quot;Wired conn&quot; ipv4.method manual</span><br><span class="line">nmcli connection up &quot;Wired conn&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>查看 Wi-Fi 热点：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli device wifi list</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>批量配置：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection add type ethernet ifname eth0 con-name eth0-static ipv4.addresses 192.168.1.100/24 ipv4.gateway 192.168.1.1 ipv4.dns 8.8.8.8</span><br></pre></td></tr></table></figure>
</li>
<li>监控连接状态：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 nmcli device status</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需确保 NetworkManager 服务运行（<code>systemctl status NetworkManager</code>）。</li>
<li>配置存储在 <code>/etc/NetworkManager/system-connections/</code>。</li>
<li>服务器可能使用 <code>netplan</code> 而非 NetworkManager。</li>
</ul>
<h5 id="1.4-netplan" tabindex="-1">1.4 netplan</h5>
<p><strong>功能</strong>：Ubuntu 默认网络配置工具，通过 YAML 文件管理网络设置（<code>/etc/netplan/</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netplan [命令]</span><br></pre></td></tr></table></figure>
<p><strong>常用命令</strong>：</p>
<ul>
<li><code>apply</code>：应用配置文件更改。</li>
<li><code>generate</code>：生成配置文件缓存。</li>
<li><code>try</code>：测试配置，超时后回滚。<br>
<strong>场景</strong>：</li>
<li>配置持久化网络设置（如静态 IP）。</li>
<li>管理复杂网络（如桥接、VLAN）。<br>
<strong>示例</strong>：</li>
<li>编辑配置文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/netplan/01-netcfg.yaml</span><br></pre></td></tr></table></figure>
示例内容：<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">eth0:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">no</span></span><br><span class="line">      <span class="attr">addresses:</span> [<span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span><span class="string">/24</span>]</span><br><span class="line">      <span class="attr">gateway4:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">        <span class="attr">addresses:</span> [<span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>, <span class="number">8.8</span><span class="number">.4</span><span class="number">.4</span>]</span><br></pre></td></tr></table></figure>
</li>
<li>应用配置：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netplan apply</span><br></pre></td></tr></table></figure>
</li>
<li>测试配置（120 秒回滚）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netplan try</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>配置 Wi-Fi：<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">wifis:</span></span><br><span class="line">    <span class="attr">wlan0:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">yes</span></span><br><span class="line">      <span class="attr">access-points:</span></span><br><span class="line">        <span class="attr">&quot;MySSID&quot;:</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">&quot;MyPassword&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li>备份配置：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/netplan/01-netcfg.yaml /etc/netplan/01-netcfg.yaml.bak</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>YAML 格式对缩进敏感（2 空格）。</li>
<li>需要 <code>sudo</code> 编辑和应用配置。</li>
<li>检查语法：<code>sudo netplan generate</code>。</li>
</ul>
<h4 id="2.-%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95" tabindex="-1">2. 网络连接测试</h4>
<p>这些命令用于测试网络连通性和延迟。</p>
<h5 id="2.1-ping" tabindex="-1">2.1 ping</h5>
<p><strong>功能</strong>：发送 ICMP 数据包测试主机连通性和延迟。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping [选项] 目标</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-c 次数</code>：发送指定次数的包。</li>
<li><code>-i 秒</code>：设置发送间隔。</li>
<li><code>-s 大小</code>：设置数据包大小（字节）。</li>
<li><code>-4</code> / <code>-6</code>：强制 IPv4/IPv6。<br>
<strong>场景</strong>：</li>
<li>测试服务器是否可达。</li>
<li>测量网络延迟。<br>
<strong>示例</strong>：</li>
<li>测试 Google：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 4 google.com</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PING google.com (142.250.190.78) 56(84) bytes of data.</span><br><span class="line">64 bytes from 142.250.190.78: icmp_seq=1 ttl=117 time=20.1 ms</span><br><span class="line">...</span><br><span class="line">--- google.com ping statistics ---</span><br><span class="line">4 packets transmitted, 4 received, 0% packet loss, time 3004ms</span><br></pre></td></tr></table></figure>
</li>
<li>设置间隔：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -i 0.5 192.168.1.1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>测试本地网络：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 4 192.168.1.1</span><br></pre></td></tr></table></figure>
</li>
<li>检查丢包：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 100 google.com | grep &quot;packet loss&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>某些服务器禁用 ICMP，可能无法 ping。</li>
<li>需 <code>sudo</code> 使用特殊选项（如 <code>-s</code> 调整包大小）。</li>
</ul>
<h5 id="2.2-traceroute" tabindex="-1">2.2 traceroute</h5>
<p><strong>功能</strong>：跟踪数据包到目标主机的路由路径（需安装 <code>sudo apt install traceroute</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute [选项] 目标</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-n</code>：不解析主机名，显示 IP。</li>
<li><code>-m 跳数</code>：设置最大跳数。</li>
<li><code>-w 秒</code>：设置每跳超时时间。</li>
<li><code>-4</code> / <code>-6</code>：强制 IPv4/IPv6。<br>
<strong>场景</strong>：</li>
<li>诊断网络路由问题。</li>
<li>确定数据包路径和延迟。<br>
<strong>示例</strong>：</li>
<li>跟踪到 Google：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute google.com</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1  192.168.1.1  0.5 ms</span><br><span class="line">2  10.0.0.1     1.2 ms</span><br><span class="line">3  142.250.190.78  20.3 ms</span><br></pre></td></tr></table></figure>
</li>
<li>不解析主机名：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute -n google.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>限制跳数：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute -m 10 google.com</span><br></pre></td></tr></table></figure>
</li>
<li>结合 <code>grep</code>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute google.com | grep &quot;ms&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需 <code>sudo</code> 在某些系统上运行。</li>
<li>防火墙可能阻止 traceroute 数据包。</li>
</ul>
<h5 id="2.3-mtr" tabindex="-1">2.3 mtr</h5>
<p><strong>功能</strong>：结合 <code>ping</code> 和 <code>traceroute</code>，实时跟踪路由并显示丢包和延迟（需安装 <code>sudo apt install mtr</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr [选项] 目标</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-r</code>：报告模式（非交互）。</li>
<li><code>-c 次数</code>：发送指定次数的包。</li>
<li><code>-n</code>：不解析主机名。</li>
<li><code>--tcp</code>：使用 TCP 而非 ICMP。<br>
<strong>场景</strong>：</li>
<li>实时诊断网络抖动或丢包。</li>
<li>分析长距离路由性能。<br>
<strong>示例</strong>：</li>
<li>实时跟踪：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr google.com</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host                  Loss%   Snt   Last   Avg  Best  Wrst StDev</span><br><span class="line">1. 192.168.1.1       0.0%    10    0.5   0.6   0.4   0.8   0.1</span><br><span class="line">2. 10.0.0.1          0.0%    10    1.2   1.3   1.1   1.5   0.2</span><br></pre></td></tr></table></figure>
</li>
<li>报告模式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr -r -c 10 google.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>保存报告：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr -r -c 100 google.com &gt; mtr_report.txt</span><br></pre></td></tr></table></figure>
</li>
<li>使用 TCP：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr --tcp google.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>比 <code>traceroute</code> 更适合动态分析。</li>
<li>需 <code>sudo</code> 使用某些协议（如 TCP）。</li>
</ul>
<h4 id="3.-%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E4%B8%8E%E7%AB%AF%E5%8F%A3%E7%9B%91%E6%8E%A7" tabindex="-1">3. 网络流量与端口监控</h4>
<p>这些命令用于监控网络流量和开放端口。</p>
<h5 id="3.1-netstat" tabindex="-1">3.1 netstat</h5>
<p><strong>功能</strong>：显示网络连接、路由表和接口统计（需安装 <code>sudo apt install net-tools</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-a</code>：显示所有连接（包括监听）。</li>
<li><code>-t</code>：显示 TCP 连接。</li>
<li><code>-u</code>：显示 UDP 连接。</li>
<li><code>-p</code>：显示关联进程。</li>
<li><code>-n</code>：显示数字地址/端口（不解析）。</li>
<li><code>-r</code>：显示路由表。<br>
<strong>场景</strong>：</li>
<li>检查开放端口和服务。</li>
<li>查看当前网络连接。<br>
<strong>示例</strong>：</li>
<li>显示监听端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tuln</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN</span><br></pre></td></tr></table></figure>
</li>
<li>显示进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tulnp</span><br></pre></td></tr></table></figure>
</li>
<li>查看路由：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -r</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>筛选特定端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tuln | grep :80</span><br></pre></td></tr></table></figure>
</li>
<li>统计连接：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep ESTABLISHED | wc -l</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><code>netstat</code> 被 <code>ss</code> 取代，推荐使用 <code>ss</code>。</li>
<li>需要 <code>sudo</code> 查看某些连接。</li>
</ul>
<h5 id="3.2-ss" tabindex="-1">3.2 ss</h5>
<p><strong>功能</strong>：现代工具，显示网络连接和端口信息，替代 <code>netstat</code>，更高效。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-t</code>：显示 TCP 连接。</li>
<li><code>-u</code>：显示 UDP 连接。</li>
<li><code>-l</code>：显示监听端口。</li>
<li><code>-p</code>：显示关联进程。</li>
<li><code>-n</code>：不解析地址/端口。</li>
<li><code>-a</code>：显示所有连接。<br>
<strong>场景</strong>：</li>
<li>检查服务器开放端口。</li>
<li>监控活跃连接。<br>
<strong>示例</strong>：</li>
<li>显示监听端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tuln</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Netid  State      Recv-Q Send-Q  Local Address:Port   Peer Address:Port</span><br><span class="line">tcp    LISTEN     0      128     0.0.0.0:22           0.0.0.0:*</span><br></pre></td></tr></table></figure>
</li>
<li>显示 TCP 连接和进程：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tnp</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>筛选活跃连接：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tn state established</span><br></pre></td></tr></table></figure>
</li>
<li>实时监控：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 &#x27;ss -tuln&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>比 <code>netstat</code> 更快，适合现代系统。</li>
<li>需要 <code>sudo</code> 查看详细进程信息。</li>
</ul>
<h5 id="3.3-nmap" tabindex="-1">3.3 nmap</h5>
<p><strong>功能</strong>：网络扫描工具，用于端口扫描、主机发现和服务探测（需安装 <code>sudo apt install nmap</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap [选项] 目标</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-p 端口</code>：扫描指定端口。</li>
<li><code>-sS</code>：TCP SYN 扫描（快速）。</li>
<li><code>-sU</code>：UDP 扫描。</li>
<li><code>-O</code>：探测操作系统。</li>
<li><code>-sV</code>：探测服务版本。</li>
<li><code>-A</code>：全面扫描（端口、服务、OS）。<br>
<strong>场景</strong>：</li>
<li>检查本地或远程主机的开放端口。</li>
<li>识别网络服务和版本。<br>
<strong>示例</strong>：</li>
<li>扫描本地主机：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap localhost</span><br></pre></td></tr></table></figure>
输出：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Starting Nmap 7.80 ( https://nmap.org )</span><br><span class="line">Nmap scan report for localhost (127.0.0.1)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br></pre></td></tr></table></figure>
</li>
<li>扫描特定端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 80,443 192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
<li>全面扫描：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A 192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>扫描子网：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.1.0/24</span><br></pre></td></tr></table></figure>
</li>
<li>保存结果：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -oN scan.txt 192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>扫描外部主机可能触发防火墙或被视为攻击。</li>
<li>需要 <code>sudo</code> 执行某些扫描（如 <code>-sS</code>、<code>-O</code>）。</li>
</ul>
<h5 id="3.4-iftop" tabindex="-1">3.4 iftop</h5>
<p><strong>功能</strong>：实时监控网络接口的流量（需安装 <code>sudo apt install iftop</code>）。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iftop [选项]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-i 接口</code>：监控指定接口。</li>
<li><code>-B</code>：以字节显示（默认比特）。</li>
<li><code>-f 过滤器</code>：应用过滤规则。<br>
<strong>场景</strong>：</li>
<li>分析网络带宽使用。</li>
<li>识别高流量主机或连接。<br>
<strong>示例</strong>：</li>
<li>监控 eth0：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iftop -i eth0</span><br></pre></td></tr></table></figure>
</li>
<li>显示字节：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iftop -B</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>过滤特定 IP：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iftop -f &quot;host 192.168.1.100&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需要 <code>sudo</code> 运行。</li>
<li>适合实时流量分析，长期监控建议用 <code>nload</code>。</li>
</ul>
<h4 id="4.-%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E4%B8%8E%E5%8D%8F%E8%AE%AE" tabindex="-1">4. 网络服务与协议</h4>
<p>这些命令用于管理网络服务和测试协议。</p>
<h5 id="4.1-curl" tabindex="-1">4.1 curl</h5>
<p><strong>功能</strong>：传输数据，支持 HTTP、HTTPS、FTP 等协议，常用于测试 API 或下载文件。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl [选项] URL</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-o 文件</code>：保存输出到文件。</li>
<li><code>-O</code>：以远程文件名保存。</li>
<li><code>-I</code>：仅获取 HTTP 头。</li>
<li><code>-X 方法</code>：指定 HTTP 方法（如 <code>POST</code>）。</li>
<li><code>-d 数据</code>：发送 POST 数据。</li>
<li><code>-H 头</code>：添加 HTTP 头。<br>
<strong>场景</strong>：</li>
<li>测试 Web 服务器响应。</li>
<li>调用 REST API。</li>
<li>下载文件。<br>
<strong>示例</strong>：</li>
<li>获取网页：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://example.com</span><br></pre></td></tr></table></figure>
</li>
<li>下载文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://example.com/file.zip</span><br></pre></td></tr></table></figure>
</li>
<li>发送 POST 请求：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -d &#x27;&#123;&quot;key&quot;:&quot;value&quot;&#125;&#x27; -H &quot;Content-Type: application/json&quot; http://api.example.com</span><br></pre></td></tr></table></figure>
</li>
<li>查看响应头：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -I https://example.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>批量下载：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://example.com/file[1-3].txt</span><br></pre></td></tr></table></figure>
</li>
<li>认证请求：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -u user:pass https://example.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>支持多种协议，适合脚本和自动化。</li>
<li>调试时使用 <code>-v</code> 查看详细交互。</li>
</ul>
<h5 id="4.2-wget" tabindex="-1">4.2 wget</h5>
<p><strong>功能</strong>：下载文件，支持 HTTP、HTTPS、FTP，适合非交互式下载。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget [选项] URL</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-O 文件</code>：指定输出文件。</li>
<li><code>-c</code>：断点续传。</li>
<li><code>-r</code>：递归下载。</li>
<li><code>-q</code>：安静模式。</li>
<li><code>--limit-rate=速率</code>：限制下载速度。<br>
<strong>场景</strong>：</li>
<li>下载大文件或镜像。</li>
<li>爬取网站内容。<br>
<strong>示例</strong>：</li>
<li>下载文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://example.com/file.zip</span><br></pre></td></tr></table></figure>
</li>
<li>断点续传：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://example.com/large.iso</span><br></pre></td></tr></table></figure>
</li>
<li>递归下载：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -r -np http://example.com/docs/</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>限制速度：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --limit-rate=500k https://example.com/file.zip</span><br></pre></td></tr></table></figure>
</li>
<li>下载列表：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -i urls.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>比 <code>curl</code> 更适合简单下载任务。</li>
<li>递归下载需谨慎，可能消耗大量资源。</li>
</ul>
<h5 id="4.3-ssh" tabindex="-1">4.3 ssh</h5>
<p><strong>功能</strong>：通过 SSH 协议远程登录或执行命令。<br>
<strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh [选项] 用户@主机 [命令]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-p 端口</code>：指定 SSH 端口。</li>
<li><code>-i 密钥</code>：使用指定私钥。</li>
<li><code>-X</code>：启用 X11 转发（图形界面）。</li>
<li><code>-L</code>：本地端口转发。<br>
<strong>场景</strong>：</li>
<li>远程管理服务器。</li>
<li>安全传输文件（通过 <code>scp</code> 或 <code>sftp</code>）。<br>
<strong>示例</strong>：</li>
<li>登录远程主机：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
<li>执行远程命令：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@192.168.1.100 &#x27;uptime&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li>使用非标准端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 2222 user@192.168.1.100</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>高级用法</strong>：</p>
<ul>
<li>端口转发：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8080:localhost:80 user@remote</span><br></pre></td></tr></table></figure>
将远程主机的 80 端口映射到本地 8080。</li>
<li>使用密钥登录：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i ~/.ssh/id_rsa user@remote</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>需配置 <code>~/.ssh/config</code> 简化连接。</li>
<li>确保 SSH 服务运行（<code>sudo systemctl status sshd</code>）。</li>
</ul>
<h4 id="5.-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E7%A4%BA%E4%BE%8B-1" tabindex="-1">5. 使用场景与示例</h4>
<p>以下是网络命令在实际任务中的应用：</p>
<ol>
<li>
<p><strong>配置网络接口</strong>：</p>
<ul>
<li>设置静态 IP：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nmcli connection modify &quot;Wired conn&quot; ipv4.addresses 192.168.1.100/24 ipv4.gateway 192.168.1.1 ipv4.method manual</span><br><span class="line">sudo nmcli connection up &quot;Wired conn&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>或通过 netplan：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/netplan/01-netcfg.yaml</span><br><span class="line">sudo netplan apply</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>诊断网络问题</strong>：</p>
<ul>
<li>测试连通性：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 4 google.com</span><br></pre></td></tr></table></figure>
</li>
<li>跟踪路由：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr -r -c 10 google.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>监控网络流量</strong>：</p>
<ul>
<li>查看实时流量：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo iftop -i eth0</span><br></pre></td></tr></table></figure>
</li>
<li>检查开放端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tuln</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>测试 Web 服务</strong>：</p>
<ul>
<li>检查 HTTP 响应：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -I http://example.com</span><br></pre></td></tr></table></figure>
</li>
<li>下载网站：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -r http://example.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>远程管理</strong>：</p>
<ul>
<li>登录服务器并查看日志：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@192.168.1.100 &#x27;tail -f /var/log/syslog&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="6.-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95-1" tabindex="-1">6. 高级用法</h4>
<ul>
<li><strong>自动化网络测试</strong>：
<ul>
<li>脚本检查连接：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ping -c 4 192.168.1.1 || <span class="built_in">echo</span> <span class="string">&quot;Network down&quot;</span></span><br></pre></td></tr></table></figure>
保存为 <code>check_network.sh</code>，用 <code>crontab</code> 定时运行。</li>
</ul>
</li>
<li><strong>端口扫描脚本</strong>：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 1-1000 192.168.1.0/24 -oN scan_results.txt</span><br></pre></td></tr></table></figure>
</li>
<li><strong>流量监控仪表板</strong>：
<ul>
<li>使用 <code>nload</code>（需安装 <code>sudo apt install nload</code>）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nload eth0</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><strong>SSH 隧道</strong>：
<ul>
<li>反向隧道（远程访问本地服务）：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R 8080:localhost:80 user@remote</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="7.-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E6%89%A9%E5%B1%95-1" tabindex="-1">7. 注意事项与扩展</h4>
<ol>
<li><strong>安全提示</strong>：
<ul>
<li>使用 <code>nmap</code> 扫描外部主机可能触发防火墙或被视为攻击。</li>
<li>SSH 默认端口（22）易受攻击，建议修改（<code>/etc/ssh/sshd_config</code>）。</li>
<li>定期检查开放端口（<code>ss -tuln</code>）。</li>
</ul>
</li>
<li><strong>性能优化</strong>：
<ul>
<li>监控大流量时，使用 <code>iftop</code> 或 <code>nload</code> 而非 <code>netstat</code>。</li>
<li>批量下载（<code>wget -r</code>）需限制深度（<code>-l</code>）避免过载。</li>
</ul>
</li>
<li><strong>相关工具</strong>：
<ul>
<li><strong>tcpdump</strong>：捕获网络数据包。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install tcpdump</span><br><span class="line">sudo tcpdump -i eth0</span><br></pre></td></tr></table></figure>
</li>
<li><strong>wireshark</strong>：图形化网络分析工具。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install wireshark</span><br><span class="line">wireshark &amp;</span><br></pre></td></tr></table></figure>
</li>
<li><strong>dig</strong> / <strong>nslookup</strong>：DNS 查询工具。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig example.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="8.-%E5%8E%8B%E7%BC%A9%E5%92%8C%E5%BD%92%E6%A1%A3%EF%BC%88compression-%26-archiving%EF%BC%89" tabindex="-1">8. 压缩和归档（Compression &amp; Archiving）</h2>
<ul>
<li><strong>tar</strong>: 创建/提取 tar 归档。<br>
示例: <code>tar -czf archive.tar.gz folder/</code>。</li>
<li><strong>gzip</strong>: 压缩文件。<br>
示例: <code>gzip file.txt</code>。</li>
<li><strong>gunzip</strong>: 解压 gz 文件。<br>
示例: <code>gunzip file.txt.gz</code>。</li>
<li><strong>zip</strong>: 创建 zip 归档。<br>
示例: <code>zip archive.zip file.txt</code>。</li>
<li><strong>unzip</strong>: 解压 zip 文件。<br>
示例: <code>unzip archive.zip</code>。</li>
</ul>
<h2 id="9.-%E6%90%9C%E7%B4%A2%E5%92%8C%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%EF%BC%88search-%26-text-processing%EF%BC%89" tabindex="-1">9. 搜索和文本处理（Search &amp; Text Processing）</h2>
<ul>
<li><strong>grep</strong>: 在文件中搜索文本。<br>
示例: <code>grep &quot;error&quot; log.txt</code>。</li>
<li><strong>find</strong>: 搜索文件（见文件管理）。</li>
<li><strong>locate</strong>: 快速搜索文件位置（需更新数据库）。<br>
示例: <code>locate filename</code>。</li>
<li><strong>which</strong>: 显示命令的可执行路径。<br>
示例: <code>which ls</code>。</li>
<li><strong>whereis</strong>: 查找命令的二进制、源和手册位置。<br>
示例: <code>whereis ls</code>。</li>
<li><strong>whatis</strong>: 显示命令的简短描述。<br>
示例: <code>whatis ls</code>。</li>
<li><strong>man</strong>: 显示命令的手册。<br>
示例: <code>man ls</code>。</li>
<li><strong>apropos</strong>: 根据关键词搜索命令。<br>
示例: <code>apropos network</code>。</li>
</ul>
<h2 id="10.-%E6%9C%8D%E5%8A%A1%E5%92%8C%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%EF%BC%88services-%26-system-admin%EF%BC%89" tabindex="-1">10. 服务和系统管理（Services &amp; System Admin）</h2>
<ul>
<li><strong>service</strong>: 管理系统服务。<br>
示例: <code>sudo service ssh start</code>。</li>
<li><strong>systemctl</strong>: 管理 systemd 服务（现代版）。<br>
示例: <code>sudo systemctl status ssh</code>。</li>
<li><strong>reboot</strong>: 重启系统。<br>
示例: <code>sudo reboot</code>。</li>
<li><strong>shutdown</strong>: 关机或重启。<br>
示例: <code>sudo shutdown -h now</code>。</li>
<li><strong>history</strong>: 显示命令历史。<br>
示例: <code>history</code>。</li>
<li><strong>clear</strong>: 清空终端屏幕。<br>
示例: <code>clear</code>。</li>
<li><strong>alias</strong>: 创建命令别名。<br>
示例: <code>alias ll='ls -la'</code>。</li>
<li><strong>env</strong>: 显示当前环境变量。<br>
示例: <code>env</code>。</li>
<li><strong>export</strong>: 设置环境变量。<br>
示例: <code>export PATH=$PATH:/newpath</code>。</li>
</ul>
<h2 id="11.-%E5%85%B6%E4%BB%96%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%88miscellaneous%EF%BC%89" tabindex="-1">11. 其他实用命令（Miscellaneous）</h2>
<ul>
<li><strong>bc</strong>: 命令行计算器。<br>
示例: <code>echo &quot;2+2&quot; | bc</code>。</li>
<li><strong>sort</strong>: 排序文件行。<br>
示例: <code>sort file.txt</code>。</li>
<li><strong>uniq</strong>: 去除重复行。<br>
示例: <code>sort file.txt | uniq</code>。</li>
<li><strong>wc</strong>: 统计行数/字数。<br>
示例: <code>wc -l file.txt</code>。</li>
<li><strong>diff</strong>: 比较两个文件差异。<br>
示例: <code>diff file1.txt file2.txt</code>。</li>
<li><strong>paste</strong>: 合并文件行。<br>
示例: <code>paste file1.txt file2.txt</code>。</li>
<li><strong>cut</strong>: 提取文件列。<br>
示例: <code>cut -d',' -f1 csvfile.csv</code>。</li>
<li><strong>tr</strong>: 转换/删除字符。<br>
示例: <code>tr 'a-z' 'A-Z' &lt; file.txt</code>。</li>
<li><strong>sed</strong>: 流编辑器，替换文本。<br>
示例: <code>sed 's/old/new/g' file.txt</code>。</li>
<li><strong>awk</strong>: 文本处理工具。<br>
示例: <code>awk '&#123;print $1&#125;' file.txt</code> (打印第一列)。</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://borrowyourhuaji.github.io/2025/09/13/ubuntu-common-cmommand/" title="ubuntu common cmommand" target="_blank" rel="external">https://borrowyourhuaji.github.io/2025/09/13/ubuntu-common-cmommand/</a>
    </li>
    
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/4%20(1).gif" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">borrowyourhuaji</span><small class="ml-1x">😋</small></a></h3>
        <div>ヾ(≧▽≦*)o</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2025/09/13/ubuntu-services-cmommand/" title="ubuntu services cmommand"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2025/09/13/%E6%95%B0%E4%BD%8Ddp/" title="数位dp"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   






</body>
</html>